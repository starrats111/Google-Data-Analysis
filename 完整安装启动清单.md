# 完整安装启动清单

## 一、必需软件安装

### 1. Python 3.9+ ✅（已安装）
- 验证：`python --version`
- 应该显示：`Python 3.x.x`

### 2. Node.js 16+ ✅（已安装）
- 验证：`node --version`
- 应该显示：`v24.13.0` 或类似版本

### 3. npm ✅（已安装）
- 验证：`npm --version`
- 应该显示：`11.6.2` 或类似版本

### 4. PostgreSQL（可选，当前使用 SQLite）
- 如果使用 SQLite，不需要安装 PostgreSQL
- 如果以后要使用 PostgreSQL，需要安装

## 二、后端安装和启动

### 步骤1：进入后端目录
```powershell
cd "D:\Google Analysis\backend"
```

### 步骤2：创建虚拟环境（如果还没有）
```powershell
python -m venv venv
```

### 步骤3：激活虚拟环境
```powershell
.\venv\Scripts\Activate.ps1
```

**验证**：提示符应该显示 `(venv)`

### 步骤4：升级 pip
```powershell
python -m pip install --upgrade pip
```

### 步骤5：安装 Python 依赖
```powershell
pip install fastapi uvicorn sqlalchemy pydantic pydantic-settings python-jose passlib python-multipart openpyxl python-dotenv
```

**等待安装完成**（可能需要几分钟）

### 步骤6：验证关键包安装
```powershell
python -c "import fastapi; print('FastAPI: OK')"
python -c "import sqlalchemy; print('SQLAlchemy: OK')"
python -c "import uvicorn; print('Uvicorn: OK')"
```

如果都显示 "OK"，继续下一步。

### 步骤7：初始化数据库
```powershell
python scripts/init_db.py
```

**等待看到**：`数据库表创建完成！`

然后执行：
```powershell
python scripts/init_users.py
```

**等待看到**：`用户初始化完成！`

然后执行：
```powershell
python scripts/init_platforms.py
```

**等待看到**：`联盟平台初始化完成！`

### 步骤8：启动后端服务
```powershell
uvicorn app.main:app --reload
```

**成功标志**：
```
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process
INFO:     Started server process
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

**保持这个窗口打开！**

## 三、前端安装和启动

### 步骤1：打开新的 PowerShell 窗口

**重要**：后端服务窗口保持运行，打开一个新的 PowerShell 窗口

### 步骤2：进入前端目录
```powershell
cd "D:\Google Analysis\frontend"
```

### 步骤3：安装前端依赖
```powershell
npm install
```

**等待安装完成**（可能需要几分钟）

### 步骤4：启动前端服务
```powershell
npm run dev
```

**成功标志**：
```
VITE v5.x.x ready in XXX ms

➜  Local:   http://localhost:3000/
```

**保持这个窗口打开！**

## 四、验证服务运行

### 1. 后端服务验证
- 打开浏览器访问：http://localhost:8000/docs
- 应该看到 FastAPI 的 API 文档页面

### 2. 前端服务验证
- 打开浏览器访问：http://localhost:3000
- 应该看到登录页面

### 3. 测试登录
- 用户名：`manager`
- 密码：`manager123`
- 点击登录

## 五、完整命令序列（复制粘贴版）

### 后端（在一个 PowerShell 窗口）

```powershell
cd "D:\Google Analysis\backend"
python -m venv venv
.\venv\Scripts\Activate.ps1
python -m pip install --upgrade pip
pip install fastapi uvicorn sqlalchemy pydantic pydantic-settings python-jose passlib python-multipart openpyxl python-dotenv
python scripts/init_db.py
python scripts/init_users.py
python scripts/init_platforms.py
uvicorn app.main:app --reload
```

### 前端（在另一个 PowerShell 窗口）

```powershell
cd "D:\Google Analysis\frontend"
npm install
npm run dev
```

## 六、常见问题

### Q: 提示找不到命令？
A: 确保虚拟环境已激活（看到 `(venv)` 前缀）

### Q: 端口被占用？
A: 检查是否有其他程序占用 8000 或 3000 端口

### Q: 依赖安装失败？
A: 检查网络连接，或使用国内镜像：
```powershell
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

### Q: npm 安装很慢？
A: 使用国内镜像：
```powershell
npm config set registry https://registry.npmmirror.com
```

## 七、服务运行状态检查

### 检查后端（端口 8000）
```powershell
Get-NetTCPConnection -LocalPort 8000 -ErrorAction SilentlyContinue
```

### 检查前端（端口 3000）
```powershell
Get-NetTCPConnection -LocalPort 3000 -ErrorAction SilentlyContinue
```

如果有输出，说明服务正在运行。

## 八、停止服务

- 在运行服务的 PowerShell 窗口中按 `Ctrl + C`
- 会停止对应的服务

## 九、默认账户

- **经理**：`manager` / `manager123`
- **员工**：`employee1` 到 `employee10` / `employee1123` 到 `employee10123`

---

**按照以上步骤执行，确保每个步骤都成功后再进行下一步！**












