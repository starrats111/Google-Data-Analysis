# ============================================
# 最终测试 - 验证CORS和登录功能
# ============================================

# 1. 测试OPTIONS请求（CORS预检）
curl -X OPTIONS "https://api.google-data-analysis.top/api/auth/login" -H "Origin: https://google-data-analysis.top" -H "Access-Control-Request-Method: POST" -H "Access-Control-Request-Headers: Content-Type" -i | grep -i "access-control"

# 2. 测试POST登录请求（实际登录）
curl -X POST "https://api.google-data-analysis.top/api/auth/login" -H "Origin: https://google-data-analysis.top" -H "Content-Type: application/x-www-form-urlencoded" -d "username=wj07&password=wj123456" -i 2>&1 | head -n 40

# 3. 如果登录成功，应该看到：
# - access-control-allow-origin: https://google-data-analysis.top
# - 响应体包含 access_token

