# 📘 天际蓝主题实施设计方案

> **设计人员**: AI Assistant  
> **版本**: v1.2（已根据验收审核报告 v4.0 修正）  
> **创建日期**: 2026-02-14  
> **修正日期**: 2026-02-14  
> **基于验收报告**: v4.0  
> **状态**: ✅ 已修正，待实施

---

## 修正说明

### v1.2 修正内容（响应验收报告 v4.0）

| 审核问题 | 审核人员意见 | 设计人员判断 | 处理方式 |
|---------|------------|-------------|---------|
| S1-a: fontFamily 'Inter' | 移除 | ✅ **审核正确** | 已移除 |
| S1-b: borderRadius 8/12 | 移除 | ✅ **审核正确** | 已移除 |
| S1-c: Card.borderRadiusLG | 移除 | ✅ **审核正确** | 已移除 |
| S1-d: Button.primaryShadow | 移除 | ⚠️ **部分同意** | 保留但修正透明度 |
| I1: P2 补充行号 | 建议 | ✅ **接受** | 已补充 |

### 关于 S1-d 的辩解

审核人员认为 `primaryShadow` 应完全移除。**我部分不同意**，理由：

1. **颜色替换是必要的**：AntD 默认阴影颜色是 `rgba(5, 145, 255, 0.1)`，这是 AntD 蓝色，如果不配置，按钮阴影将与天际蓝主题不一致。

2. **透明度变更确实超出范围**：我原方案把透明度从 0.1 改成了 0.3，这是不对的。

3. **修正方案**：保留颜色替换，恢复原透明度。

```javascript
// 原方案（错误）
primaryShadow: '0 2px 4px rgba(77, 166, 255, 0.3)'

// 修正后（正确）
primaryShadow: '0 2px 0 rgba(77, 166, 255, 0.1)'
```

这样既完成了颜色替换（5,145,255 → 77,166,255），又保持了 AntD 原有的阴影强度。

### v1.1 修正内容（已完成）

v3.0 提出的 F1 致命缺陷和 E1-E8 数据错误已在 v1.1 中全部修正，验收报告 v4.0 确认通过。

---

## 一、方案概述

### 1.1 目标

将现有紫蓝主题色系（`#667eea` / `#764ba2`）全面替换为天际蓝主题色系（`#4DA6FF` / `#7B68EE`），同时保留所有语义色不变。

### 1.2 核心颜色映射（完整版）

| 旧色值 | 新色值 | 用途 |
|--------|--------|------|
| `#667eea` | `#4DA6FF` | 品牌主色 |
| `#764ba2` | `#7B68EE` | 渐变终点色 |
| `#1890ff` | `#4DA6FF` | AntD 4.x 蓝（作为主题色） |
| `#1677ff` | `#4DA6FF` | AntD 5.x 蓝（作为主题色） |
| `#001529` | `#0C2D48` | 侧边栏深色背景 |
| `#108ee9` | `#4DA6FF` | 进度条渐变起始色 |
| `#e6f7ff` | `#EBF5FF` | 主题色浅底背景 |
| `#91d5ff` | `#A8D4FF` | 主题色浅边框 |
| `rgba(102, 126, 234, x)` | `rgba(77, 166, 255, x)` | #667eea 的 RGBA 透明形式 |
| `rgba(5, 145, 255, x)` | `rgba(77, 166, 255, x)` | AntD 默认蓝的 RGBA（如按钮阴影） |

### 1.3 渐变替换规则

```css
/* 旧渐变 */
linear-gradient(135deg, #667eea 0%, #764ba2 100%)
/* 新渐变 */
linear-gradient(135deg, #4DA6FF 0%, #7B68EE 100%)

/* 旧横向渐变 */
linear-gradient(90deg, #667eea, #764ba2, #667eea)
/* 新横向渐变 */
linear-gradient(90deg, #4DA6FF, #7B68EE, #4DA6FF)
```

---

## 二、禁止替换的颜色（语义色清单）

> ⚠️ **以下颜色具有业务语义，必须保留原值，绝对不能替换！**

### 2.1 红色系（费用/错误/危险）

| 色值 | 语义 | 使用场景 |
|------|------|---------|
| `#cf1322` | 广告花费/亏损 | 报表费用列 |
| `#ff4d4f` | 错误/拒绝/负值 | 全局错误状态 |
| `#f5222d` | 危险红 | CpcDeployModal 失败项 |
| `#e53e3e` | 代码错误色 | ReportViewer 代码块 |
| `#ffccc7` | D级/关停浅边框 | ReportViewer |

### 2.2 绿色系（收入/成功）

| 色值 | 语义 | 使用场景 |
|------|------|---------|
| `#3f8600` | 收入/盈利 | 报表佣金列 |
| `#52c41a` | 成功/正值 | 全局成功状态 |
| `#87d068` | 进度条绿色终点 | LuchuCreate |
| `#b7eb8f` | 成功浅边框 | ReportViewer S级 |

### 2.3 橙黄色系（警告/待审核）

| 色值 | 语义 | 使用场景 |
|------|------|---------|
| `#faad14` | 警告/待审核 | 通知、待审状态 |
| `#ffe58f` | 警告浅边框 | ReportViewer B级 |
| `#fa8c16` | 平台色RW / C级 | DataCenter |
| `#ffd591` | C级浅边框 | ReportViewer |

### 2.4 平台标识色（固定品牌色）

| 色值 | 平台 |
|------|------|
| `#fa8c16` | RW |
| `#eb2f96` | PM |
| `#722ed1` | LB |
| `#f5222d` | PB |
| `#a0d911` | BSH |
| `#13c2c2` | CF |

### 2.5 中性灰色系（全部保留）

```
#f5f5f5  #fafafa  #fafbfc  #f5f7fa    — 背景浅灰
#f0f0f0  #e8e8e8  #d9d9d9             — 边框灰
#999  #8c8c8c  #666  #bbb  #333       — 文字灰
#fff  #ffffff                          — 白色
#1a1a2e  #2d3748  #4a5568  #374151    — 深灰
```

> **注意**：除 `rgba(102, 126, 234, x)` 和 `rgba(5, 145, 255, x)` 外的其他 rgba 值保持不动。

---

## 三、实施计划（已修正）

### 3.1 P0 基础设施（10个文件，20处）

> **优先级**: 最高，所有后续工作的基础  
> **预计耗时**: 1小时

#### 3.1.1 新建 `src/styles/colors.js`

```javascript
/**
 * 天际蓝主题 - 颜色常量定义
 * @description 统一管理所有主题色，方便后续维护
 */

// ============ 品牌主题色（可替换） ============
export const PRIMARY = '#4DA6FF'              // 主色
export const PRIMARY_DARK = '#1A7FDB'         // 深色（hover）
export const PRIMARY_LIGHT = '#EBF5FF'        // 浅底背景
export const PRIMARY_BORDER = '#A8D4FF'       // 浅边框
export const PRIMARY_RGB = '77, 166, 255'     // 用于 rgba() 构造
export const GRADIENT_START = '#4DA6FF'       // 渐变起点
export const GRADIENT_END = '#7B68EE'         // 渐变终点
export const GRADIENT_END_RGB = '123, 104, 238'  // #7B68EE 的 RGB
export const GRADIENT = 'linear-gradient(135deg, #4DA6FF 0%, #7B68EE 100%)'
export const GRADIENT_90 = 'linear-gradient(90deg, #4DA6FF, #7B68EE, #4DA6FF)'

// ============ 侧边栏 ============
export const SIDER_BG = '#0C2D48'
export const SIDER_SUB_BG = '#0A2540'

// ============ 语义色（禁止修改） ============
export const COST_RED = '#cf1322'             // 广告花费
export const ERROR_RED = '#ff4d4f'            // 错误/拒绝
export const DANGER_RED = '#f5222d'           // 危险红
export const INCOME_GREEN = '#3f8600'         // 收入/盈利
export const SUCCESS_GREEN = '#52c41a'        // 成功
export const WARNING_ORANGE = '#faad14'       // 警告

// ============ 导出主题对象 ============
export default {
  primary: PRIMARY,
  primaryDark: PRIMARY_DARK,
  primaryLight: PRIMARY_LIGHT,
  primaryBorder: PRIMARY_BORDER,
  primaryRgb: PRIMARY_RGB,
  gradient: GRADIENT,
  siderBg: SIDER_BG,
}
```

#### 3.1.2 新建 `src/styles/themeConfig.js` ✅ 已修正（仅颜色配置）

```javascript
/**
 * Ant Design 5.x 主题配置
 * @description 通过 ConfigProvider theme prop 注入
 * 
 * 注意：本配置仅包含颜色相关属性，不包含圆角、字体等样式变更
 */
const themeConfig = {
  token: {
    // 主色
    colorPrimary: '#4DA6FF',
    colorInfo: '#4DA6FF',
    colorLink: '#4DA6FF',
    colorLinkHover: '#1A7FDB',
    // 注意：不配置 fontFamily、borderRadius 等非颜色属性
  },
  
  components: {
    // 侧边栏菜单
    Menu: {
      darkItemBg: '#0C2D48',
      darkSubMenuItemBg: '#0A2540',
      darkItemSelectedBg: 'rgba(77, 166, 255, 0.2)',
      darkItemSelectedColor: '#fff',
    },
    
    // 按钮 - 仅替换阴影颜色，保持原透明度
    Button: {
      primaryColor: '#fff',
      primaryShadow: '0 2px 0 rgba(77, 166, 255, 0.1)',  // 颜色替换，透明度保持 0.1
    },
    // 注意：不配置 Card 等非颜色属性
  },
}

export default themeConfig
```

#### 3.1.3 修改 `src/main.jsx` — 1处

```jsx
// 添加导入
import themeConfig from './styles/themeConfig'

// 修改 ConfigProvider
<ConfigProvider locale={zhCN} theme={themeConfig}>
  <App />
</ConfigProvider>
```

#### 3.1.4 修改 `index.html` — 2处

| 行号 | 原代码 | 新代码 |
|------|--------|--------|
| 22 | `background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);` | `background: linear-gradient(135deg, #4DA6FF 0%, #7B68EE 100%);` |
| 105 | `color:#667eea` | `color:#4DA6FF` |

#### 3.1.5 修改 `src/index.css` — 2处

| 行号 | 原代码 | 新代码 |
|------|--------|--------|
| 113 | `rgba(102, 126, 234, 0.1)` ×2 | `rgba(77, 166, 255, 0.1)` ×2 |
| 190 | `#667eea` | `#4DA6FF` |

#### 3.1.6 修改 `src/components/Layout/index.jsx` — 1处

| 行号 | 原代码 | 新代码 |
|------|--------|--------|
| 398 | `background: '#001529'` | `background: '#0C2D48'` |

#### 3.1.7 修改 `src/pages/Login.jsx` — 1处

| 行号 | 原代码 | 新代码 |
|------|--------|--------|
| 34 | `linear-gradient(135deg, #667eea 0%, #764ba2 100%)` | `linear-gradient(135deg, #4DA6FF 0%, #7B68EE 100%)` |

#### 3.1.8 修改 `src/components/PageLoading/style.css` — 5处

| 行号 | 原代码 | 新代码 |
|------|--------|--------|
| 6 | 渐变 `#667eea` `#764ba2` | `#4DA6FF` `#7B68EE` |
| 98 | `rgba(102, 126, 234, 0.1)` | `rgba(77, 166, 255, 0.1)` |
| 105 | `#667eea` | `#4DA6FF` |
| 109 | `#667eea` | `#4DA6FF` |
| 113 | `#667eea` | `#4DA6FF` |

#### 3.1.9 修改 `src/components/ErrorBoundary/index.jsx` — 1处

| 行号 | 原代码 | 新代码 |
|------|--------|--------|
| 56 | 渐变 `#667eea` `#764ba2` | `#4DA6FF` `#7B68EE` |

#### 3.1.10 修改 `src/components/AiGeneratingOverlay/style.css` — 6处

| 行号 | 原代码 | 新代码 |
|------|--------|--------|
| 9 | `rgba(102, 126, 234, 0.4)` | `rgba(77, 166, 255, 0.4)` |
| 42 | `#667eea` | `#4DA6FF` |
| 65 | `rgba(102, 126, 234, 0.2)` | `rgba(77, 166, 255, 0.2)` |
| 86 | 渐变 `#667eea` `#764ba2` | `#4DA6FF` `#7B68EE` |
| 132 | 渐变 `#667eea` `#764ba2` | `#4DA6FF` `#7B68EE` |
| 138 | `rgba(102, 126, 234, 0.4)` | `rgba(77, 166, 255, 0.4)` |

---

### 3.2 P1 核心页面（15个文件，49处）

> **优先级**: 高，用户高频使用页面  
> **预计耗时**: 2小时

| # | 文件 | 替换数 | 详细行号 |
|---|------|--------|---------|
| 11 | `Dashboard.jsx` | 3处 | 第480/588行 `#1890ff`、第507行 `#e6f7ff` |
| 12 | `DataCenter.jsx` | 7处 | 第286/303/400/581/696行 `#1890ff` + 第303/400行 `#e6f7ff` |
| 13 | `Analysis.jsx` | 4处 | 第722/1158行 `#1677ff`、第821/1008行渐变 |
| 14 | `BidManagement.jsx` | 4处 | 第569行 `#1890ff`、第712行渐变、第717行rgba、第754行 `#764ba2` |
| 15 | `BidManagement.css` | 1处 | 第6行渐变 |
| 16 | `MyReports.jsx` | 2处 | 第302行 `#1677ff`、第370行渐变 |
| 17 | `ReportMonthly.jsx` | 3处 | 第71/196/243行 `#1677ff` |
| 18 | `ReportQuarterly.jsx` | 3处 | 第71/206/253行 `#1677ff` |
| 19 | `ReportYearly.jsx` | 3处 | 第70/198/245行 `#1677ff` |
| 20 | `FinancialReport.jsx` | 1处 | 第238行 `#1677ff` |
| 21 | `TeamManagement.jsx` | 1处 | 第427行 `#1890ff`。**语义色保留！** |
| 22 | `TeamOverview.jsx` | 1处 | 第168行 `#1890ff`。**语义色保留！** |
| 23 | `SystemLogs.jsx` | 4处 | 第120/231行 `#1677ff`、第227行 `#e6f7ff`+`#91d5ff` |
| 24 | `ReportViewer.css` | 6处 | 第51行 `#1890ff`、第124行渐变、第169/252/256/264行 `#667eea` |
| 25 | `ReportViewer.jsx` | 6处 | 第158/192行各含 `#1890ff`+`#e6f7ff`+`#91d5ff` |

---

### 3.3 P2 次要页面（14个文件，27处）✅ 已补充详细行号

> **优先级**: 中，P1完成后实施  
> **预计耗时**: 1.5小时

| # | 文件 | 替换数 | 详细行号 |
|---|------|--------|---------|
| 26 | `PlatformData.jsx` | 4处 | 第484/493/680/686行 `#1890ff` |
| 27 | `GoogleAdsData.jsx` | 3处 | 第322/329/338行 `#1890ff` |
| 28 | `LuchuCreate.jsx` | 7处 | 第144/170/533/617/634/725/732行 |
| 29 | `LuchuDashboard.jsx` | 2处 | 第72/126行 `#1890ff` |
| 30 | `LuchuNotifications.jsx` | 1处 | 第36行 `#1890ff` |
| 31 | `AdCopyGenerator.jsx` | 2处 | 第321/519行 `#1890ff` |
| 32 | `Expenses.jsx` | 1处 | 第406行 `#1890ff` |
| 33 | `ExpenseCostDetail.jsx` | 1处 | 第184行 `#1890ff` |
| 34 | `StageLabelDetail.jsx` | 1处 | 第88行 `#1890ff` |
| 35 | `MyAnalysis.jsx` | 1处 | 第29行 `#1677ff` |
| 36 | `CpcDeployModal/index.jsx` | 1处 | 第425行 `#1677ff` |
| 37 | `CpcDeployModal/style.css` | 1处 | 第7行 `#e6f7ff` |
| 38 | `Upload.jsx` | 1处 | 第526行 `#e6f7ff` |
| 39 | `GoogleOAuthCallback.jsx` | 1处 | 第88行 `#e6f7ff` |

---

### 3.4 确认跳过的文件（11个）

> 以下文件仅含语义色或中性色，无需修改

| # | 文件 | 原因 |
|---|------|------|
| 40 | `EmployeeList.jsx` | 全部语义色（红绿） |
| 41 | `EmployeeDetail.jsx` | 全部语义色（红绿） |
| 42 | `RejectionDetails.jsx` | 全部语义色（红色） |
| 43 | `AffiliateAccounts.jsx` | 全部语义色（红绿） |
| 44 | `MccAccounts.jsx` | 语义色 + 中性灰 |
| 45 | `Analysis.css` | 中性色为主 |
| 46 | `CpcDeployModal.jsx`（独立版） | 全部语义色 |
| 47 | `LuchuReviews.jsx` | 仅 `#ff4d4f` 语义红 |
| 48 | `LuchuArticleDetail.jsx` | 无主题色引用 |
| 49 | `LuchuPublish.jsx` | 无主题色引用 |
| 50 | `LuchuArticles.jsx` | 无主题色引用 |

---

## 四、自测检查清单

### 4.1 P0 完成后检查

- [ ] 在项目根目录执行以下命令确认无 hex 残留：
  ```bash
  grep -rn "#667eea\|#764ba2\|#1890ff\|#1677ff\|#001529\|#108ee9" src/ index.html
  ```
- [ ] 确认无 rgba 残留：
  ```bash
  grep -rn "rgba(102, 126, 234\|rgba(102,126,234" src/ index.html
  ```
- [ ] 侧边栏背景色为 `#0C2D48`
- [ ] 登录页渐变背景为 `#4DA6FF → #7B68EE`
- [ ] 初始加载页（index.html）渐变已更新（仅2处）
- [ ] AI 生成遮罩层颜色正确

### 4.2 P1 完成后检查

- [ ] Dashboard 节日卡边框色为 `#4DA6FF`
- [ ] DataCenter 中 CG 平台色为 `#4DA6FF`，其他平台色保持不变
- [ ] 报表中有效佣金色为 `#4DA6FF`
- [ ] 报表中费用红色 `#cf1322` 未被修改
- [ ] 报表中佣金绿色 `#3f8600` 未被修改
- [ ] ReportViewer 评级颜色正确（A级蓝色，B级黄色，C级橙色，D级红色）

### 4.3 P2 完成后检查

- [ ] 全站搜索 `#667eea` `#764ba2` `#1890ff` `#1677ff` 无残留
- [ ] 全站搜索 `rgba(102, 126, 234` 无残留
- [ ] 所有表单 focus 状态为蓝色
- [ ] 所有按钮 hover 状态颜色正确
- [ ] 移动端样式无异常

---

## 五、回滚方案

```bash
# 创建工作分支
git checkout -b feature/azure-blue-theme

# P0 完成后打标签
git tag theme-p0

# P1 完成后打标签
git tag theme-p1

# P2 完成后打标签
git tag theme-p2

# 如需回滚
git checkout theme-p0  # 回滚到P0状态
```

---

## 六、统计汇总

| 指标 | 数值 |
|------|------|
| P0 替换点 | 20处 |
| P1 替换点 | 49处 |
| P2 替换点 | 27处 |
| **总替换点** | **96处** |
| 确认跳过文件 | 11个 |

---

## 七、设计人员修正确认

### v1.2 修正（响应 v4.0 审核）

- [x] S1-a：`themeConfig.js` 已移除 `fontFamily` 属性
- [x] S1-b：`themeConfig.js` 已移除 `borderRadius` 和 `borderRadiusLG`
- [x] S1-c：`themeConfig.js` 已移除 `Card` 配置
- [x] S1-d：`themeConfig.js` `Button.primaryShadow` 已修正透明度为 0.1（保留颜色替换）
- [x] I1：P2 文件表格已补充详细行号

### v1.1 修正（响应 v3.0 审核，已通过）

- [x] F1：rgba(102, 126, 234, x) 已纳入映射表
- [x] E1-E8：所有数据错误已修正

---

## 八、设计人员签字

| 批次 | 完成日期 | 自测通过 | 签字 |
|------|---------|---------|------|
| **方案修正 v1.2** | 2026-02-14 | ✅ | AI Assistant |
| P0 基础设施（20处） | | ☐ | |
| P1 核心页面（49处） | | ☐ | |
| P2 次要页面（27处） | | ☐ | |
| **全部完成** | | ☐ | |

---

## 九、验收确认

| 确认项 | 审核人确认 |
|--------|----------|
| 方案 v1.2 响应了 S1 范围蔓延问题 | ☐ |
| themeConfig.js 仅包含颜色配置 | ☐ |
| Button.primaryShadow 透明度保持 0.1 | ☐ |
| P2 已补充详细行号 | ☐ |
| v3.0 全部问题已修正 | ✅ 已通过 |

---

*本设计方案 v1.2 已根据验收审核报告 v4.0 完成修正。设计人员对 S1-a/b/c 完全同意移除，对 S1-d 进行了辩解（保留颜色替换但修正透明度）。现提交验收人员 07 审核，通过后开始实施。*
