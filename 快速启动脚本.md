# 快速启动脚本

## Windows PowerShell 启动脚本

### 启动后端（backend_start.ps1）

创建文件 `backend_start.ps1`：

```powershell
# 启动后端服务
Write-Host "正在启动后端服务..." -ForegroundColor Green
cd backend

# 检查虚拟环境
if (-not (Test-Path "venv")) {
    Write-Host "创建虚拟环境..." -ForegroundColor Yellow
    python -m venv venv
}

# 激活虚拟环境
Write-Host "激活虚拟环境..." -ForegroundColor Yellow
.\venv\Scripts\Activate.ps1

# 安装依赖（如果需要）
if (-not (Test-Path "venv\Lib\site-packages\fastapi")) {
    Write-Host "安装依赖..." -ForegroundColor Yellow
    pip install -r requirements.txt
}

# 初始化数据库（首次运行）
if (-not (Test-Path "..\db_initialized.flag")) {
    Write-Host "初始化数据库..." -ForegroundColor Yellow
    python scripts/init_db.py
    python scripts/init_users.py
    python scripts/init_platforms.py
    New-Item -ItemType File -Path "..\db_initialized.flag"
}

# 启动服务
Write-Host "启动后端服务在 http://localhost:8000" -ForegroundColor Green
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 启动前端（frontend_start.ps1）

创建文件 `frontend_start.ps1`：

```powershell
# 启动前端服务
Write-Host "正在启动前端服务..." -ForegroundColor Green
cd frontend

# 检查Node.js
try {
    $nodeVersion = node --version
    Write-Host "Node.js 版本: $nodeVersion" -ForegroundColor Green
} catch {
    Write-Host "错误: 未找到 Node.js，请先安装 Node.js" -ForegroundColor Red
    Write-Host "下载地址: https://nodejs.org/" -ForegroundColor Yellow
    exit 1
}

# 检查依赖
if (-not (Test-Path "node_modules")) {
    Write-Host "安装依赖..." -ForegroundColor Yellow
    npm install
}

# 启动服务
Write-Host "启动前端服务在 http://localhost:3000" -ForegroundColor Green
npm run dev
```

## 使用方法

### 方法1：使用PowerShell脚本

1. **启动后端**（在一个终端窗口）：
   ```powershell
   .\backend_start.ps1
   ```

2. **启动前端**（在另一个终端窗口）：
   ```powershell
   .\frontend_start.ps1
   ```

### 方法2：手动启动

#### 终端1 - 后端
```bash
cd backend
python -m venv venv
.\venv\Scripts\Activate.ps1
pip install -r requirements.txt
python scripts/init_db.py
python scripts/init_users.py
python scripts/init_platforms.py
uvicorn app.main:app --reload
```

#### 终端2 - 前端
```bash
cd frontend
npm install
npm run dev
```

## 检查服务状态

### 后端检查
访问：http://localhost:8000/docs
应该看到 FastAPI 的 API 文档页面

### 前端检查
访问：http://localhost:3000
应该看到登录页面

## 停止服务

在对应的终端窗口中按 `Ctrl + C` 停止服务









