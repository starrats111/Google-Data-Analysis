# 使用服务账号配置新令牌

## 目标
将新令牌 `hWBTxgYlOiWB4XfXQl_UfA` 使用服务账号方式授权

## 什么是服务账号？
服务账号是Google Cloud中用于应用程序和服务之间身份验证的特殊账号，不需要用户交互即可访问API。

## 步骤

### 步骤1: 创建服务账号
1. 登录 Google Cloud Console：https://console.cloud.google.com/
2. 选择项目：`endless-sol-485904-h1`
3. 进入 "IAM & Admin" > "Service Accounts"
4. 点击 "+ CREATE SERVICE ACCOUNT"
5. 填写：
   - Service account name: `google-ads-api-service`
   - Service account ID: 自动生成
   - Description: `Service account for Google Ads API`
6. 点击 "CREATE AND CONTINUE"
7. 角色：选择 "Editor" 或根据需要选择
8. 点击 "CONTINUE" > "DONE"

### 步骤2: 创建服务账号密钥
1. 在服务账号列表中，点击刚创建的服务账号
2. 进入 "KEYS" 标签
3. 点击 "ADD KEY" > "Create new key"
4. 选择 "JSON" 格式
5. 点击 "CREATE"
6. 会自动下载一个JSON文件（例如：`google-ads-api-service-xxxxx.json`）
7. **重要**：保存好这个JSON文件，不要泄露

### 步骤3: 在Google Ads中授权服务账号
1. 登录 Google Ads：https://ads.google.com/
2. 进入 "工具和设置" > "访问权限和安全" > "API 访问权限"
3. 找到 "服务账号" 部分
4. 添加服务账号邮箱（从JSON文件中的 `client_email` 字段获取）
5. 授予必要的权限

### 步骤4: 配置环境变量
将服务账号JSON文件上传到服务器，并配置环境变量：

```bash
# 上传JSON文件到服务器
# 例如：/home/admin/Google-Data-Analysis/backend/google-ads-service-account.json

# 在.env文件中添加：
GOOGLE_APPLICATION_CREDENTIALS=/home/admin/Google-Data-Analysis/backend/google-ads-service-account.json
GOOGLE_ADS_SHARED_DEVELOPER_TOKEN=hWBTxgYlOiWB4XfXQl_UfA
```

### 步骤5: 更新代码使用服务账号
需要修改代码以使用服务账号认证，而不是OAuth 2.0客户端。

## 参考文档
- Google Cloud服务账号文档：https://cloud.google.com/iam/docs/service-accounts
- Google Ads API服务账号认证：https://developers.google.com/google-ads/api/docs/oauth/service-accounts

## 注意事项
- 服务账号JSON文件包含敏感信息，不要泄露
- 确保服务账号有正确的权限
- 确保在Google Ads中授权了服务账号



## 目标
将新令牌 `hWBTxgYlOiWB4XfXQl_UfA` 使用服务账号方式授权

## 什么是服务账号？
服务账号是Google Cloud中用于应用程序和服务之间身份验证的特殊账号，不需要用户交互即可访问API。

## 步骤

### 步骤1: 创建服务账号
1. 登录 Google Cloud Console：https://console.cloud.google.com/
2. 选择项目：`endless-sol-485904-h1`
3. 进入 "IAM & Admin" > "Service Accounts"
4. 点击 "+ CREATE SERVICE ACCOUNT"
5. 填写：
   - Service account name: `google-ads-api-service`
   - Service account ID: 自动生成
   - Description: `Service account for Google Ads API`
6. 点击 "CREATE AND CONTINUE"
7. 角色：选择 "Editor" 或根据需要选择
8. 点击 "CONTINUE" > "DONE"

### 步骤2: 创建服务账号密钥
1. 在服务账号列表中，点击刚创建的服务账号
2. 进入 "KEYS" 标签
3. 点击 "ADD KEY" > "Create new key"
4. 选择 "JSON" 格式
5. 点击 "CREATE"
6. 会自动下载一个JSON文件（例如：`google-ads-api-service-xxxxx.json`）
7. **重要**：保存好这个JSON文件，不要泄露

### 步骤3: 在Google Ads中授权服务账号
1. 登录 Google Ads：https://ads.google.com/
2. 进入 "工具和设置" > "访问权限和安全" > "API 访问权限"
3. 找到 "服务账号" 部分
4. 添加服务账号邮箱（从JSON文件中的 `client_email` 字段获取）
5. 授予必要的权限

### 步骤4: 配置环境变量
将服务账号JSON文件上传到服务器，并配置环境变量：

```bash
# 上传JSON文件到服务器
# 例如：/home/admin/Google-Data-Analysis/backend/google-ads-service-account.json

# 在.env文件中添加：
GOOGLE_APPLICATION_CREDENTIALS=/home/admin/Google-Data-Analysis/backend/google-ads-service-account.json
GOOGLE_ADS_SHARED_DEVELOPER_TOKEN=hWBTxgYlOiWB4XfXQl_UfA
```

### 步骤5: 更新代码使用服务账号
需要修改代码以使用服务账号认证，而不是OAuth 2.0客户端。

## 参考文档
- Google Cloud服务账号文档：https://cloud.google.com/iam/docs/service-accounts
- Google Ads API服务账号认证：https://developers.google.com/google-ads/api/docs/oauth/service-accounts

## 注意事项
- 服务账号JSON文件包含敏感信息，不要泄露
- 确保服务账号有正确的权限
- 确保在Google Ads中授权了服务账号














