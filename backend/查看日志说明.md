# 如何查看后端日志

## 方法1: 查看控制台输出（最简单）

当后端服务器运行时，所有日志都会直接输出到控制台。

### 启动服务器并查看日志：

```bash
cd backend
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**日志会显示：**
- INFO级别：正常操作信息
- WARNING级别：警告信息
- ERROR级别：错误信息（红色）
- 完整的错误堆栈跟踪

## 方法2: 查看日志文件

日志会自动保存到 `backend/logs/` 目录：

### 日志文件位置：
- **`backend/logs/app.log`** - 所有日志（INFO及以上级别）
- **`backend/logs/error.log`** - 仅错误日志（ERROR级别）

### 查看日志文件：

**Windows PowerShell:**
```powershell
# 查看所有日志
Get-Content backend\logs\app.log -Tail 50

# 查看错误日志
Get-Content backend\logs\error.log -Tail 50

# 实时跟踪日志（类似tail -f）
Get-Content backend\logs\app.log -Wait -Tail 20
```

**Windows CMD:**
```cmd
# 查看最后50行
type backend\logs\app.log | more

# 查看错误日志
type backend\logs\error.log
```

**Git Bash / Linux:**
```bash
# 查看最后50行
tail -n 50 backend/logs/app.log

# 实时跟踪日志
tail -f backend/logs/app.log

# 查看错误日志
tail -n 50 backend/logs/error.log
```

## 方法3: 使用Python查看日志

```python
# 查看日志文件内容
with open('backend/logs/app.log', 'r', encoding='utf-8') as f:
    lines = f.readlines()
    # 打印最后50行
    for line in lines[-50:]:
        print(line)
```

## 方法4: 在代码中添加详细日志

如果需要在特定位置添加日志，使用：

```python
import logging

logger = logging.getLogger(__name__)

# 不同级别的日志
logger.debug("调试信息")
logger.info("一般信息")
logger.warning("警告信息")
logger.error("错误信息")
logger.critical("严重错误")
```

## 常见错误查看技巧

### 1. 查找特定错误：
```powershell
# 在日志中搜索"错误"或"Error"
Select-String -Path backend\logs\app.log -Pattern "错误|Error|Exception" -Context 5
```

### 2. 查看最近的错误：
```powershell
# 查看最后100行，过滤错误
Get-Content backend\logs\app.log -Tail 100 | Select-String "ERROR|Exception"
```

### 3. 查看特定时间段的日志：
日志格式：`2026-01-27 06:08:15 - app.api.analysis - ERROR - ...`

可以搜索特定时间：
```powershell
Select-String -Path backend\logs\app.log -Pattern "2026-01-27 06:"
```

## 日志级别说明

- **DEBUG**: 详细的调试信息（开发时使用）
- **INFO**: 一般信息（正常操作）
- **WARNING**: 警告信息（可能的问题）
- **ERROR**: 错误信息（需要关注）
- **CRITICAL**: 严重错误（系统级问题）

## 快速调试技巧

1. **查看完整错误堆栈**：错误日志会包含完整的Python堆栈跟踪
2. **查看请求信息**：日志会记录请求的详细信息
3. **查看分析过程**：分析服务会记录每个步骤的日志

## 注意事项

- 日志文件会不断增长，定期清理旧日志
- 生产环境建议设置日志轮转（log rotation）
- 敏感信息（如密码）不会记录到日志中



