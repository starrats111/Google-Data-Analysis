# Google Ads API 配置 - 简单版

## 你需要准备什么？

就像登录网站需要账号密码一样，使用Google Ads API需要5个"密码"：

1. **客户端ID** - 就像你的用户名
2. **客户端密钥** - 就像你的密码
3. **开发者令牌** - Google给你的特殊通行证
4. **刷新令牌** - 用来保持登录状态的令牌
5. **MCC账号ID** - 你的Google Ads账号编号

---

## 第一步：去Google网站注册（获取客户端ID和密钥）

### 步骤1：打开Google Cloud网站
1. 打开浏览器，访问：**https://console.cloud.google.com/**
2. 用你的Google账号登录（就是你的Gmail账号）

### 步骤2：创建一个项目
1. 点击页面左上角的"选择项目"
2. 点击"新建项目"
3. 项目名称随便填，比如：`我的广告分析`
4. 点击"创建"
5. 等待几秒钟，项目创建完成

### 步骤3：开启Google Ads API
1. 访问这个网址：**https://console.cloud.google.com/apis/library/googleads.googleapis.com**
2. 点击蓝色的"启用"按钮
3. 等待几秒钟

### 步骤4：创建账号密码（OAuth凭证）
1. 访问：**https://console.cloud.google.com/apis/credentials**
2. 点击页面顶部的"创建凭证"
3. 选择"OAuth客户端ID"
4. 如果提示"配置OAuth同意屏幕"，点击"配置同意屏幕"：
   - 选择"外部"（如果只是自己用，选"内部"也可以）
   - 应用名称随便填，比如：`广告分析工具`
   - 用户支持邮箱填你的邮箱
   - 点击"保存并继续"3次，最后点击"返回到信息中心"
5. 再次点击"创建凭证" → "OAuth客户端ID"
6. 应用类型选择"桌面应用"
7. 名称随便填，比如：`我的客户端`
8. 点击"创建"
9. **重要**：会弹出一个窗口，显示：
   - **客户端ID**：一串很长的字符，复制保存
   - **客户端密钥**：另一串字符，复制保存
   - ⚠️ 这个窗口只显示一次，一定要保存好！

---

## 第二步：去Google Ads网站申请通行证（开发者令牌）

### 步骤1：打开Google Ads网站
1. 访问：**https://ads.google.com/**
2. 用你的Google Ads账号登录

### 步骤2：申请开发者令牌
1. 点击右上角的**工具图标**（🔧）
2. 在左侧菜单找到"设置"
3. 点击"API中心"
4. 如果看到"申请开发者令牌"按钮，点击它
5. 填写表格：
   - 应用名称：`广告分析工具`
   - 应用类型：选"其他"
   - 用途说明：写"用于分析广告数据，生成报告"
   - 联系信息：填你的邮箱和电话
6. 点击"提交"
7. **等待1-2天**，Google会审核你的申请
8. 审核通过后，回到"API中心"，你会看到**开发者令牌**（一串字符），复制保存

---

## 第三步：获取刷新令牌（保持登录的令牌）

### 方法：使用我给你的脚本（最简单）

1. 打开命令行（Windows按Win+R，输入cmd，回车）

2. 进入项目目录：
   ```
   cd D:\Google Analysis\backend
   ```

3. 安装工具：
   ```
   pip install google-auth-oauthlib google-auth
   ```

4. 打开文件：`backend/scripts/get_google_ads_refresh_token.py`
   - 用记事本或VS Code打开
   - 找到这两行：
     ```python
     CLIENT_ID = '你的客户端ID'
     CLIENT_SECRET = '你的客户端密钥'
     ```
   - 把刚才保存的客户端ID和密钥填进去

5. 运行脚本：
   ```
   python scripts/get_google_ads_refresh_token.py
   ```

6. 会自动打开浏览器，让你登录Google账号并授权

7. 授权完成后，脚本会显示**刷新令牌**，复制保存

---

## 第四步：找到你的MCC账号编号

1. 访问：**https://ads.google.com/**
2. 登录你的Google Ads账号
3. 点击右上角的账号选择器（显示你当前账号的地方）
4. 选择你的MCC账号
5. 看浏览器地址栏，网址类似：
   ```
   https://ads.google.com/aw/overview?__c=1234567890
   ```
6. 其中 `1234567890` 这部分就是你的**MCC账号ID**，复制保存

---

## 总结：你需要的5个信息

现在你应该有这5个信息了：

1. ✅ **客户端ID** - 从第一步获取
2. ✅ **客户端密钥** - 从第一步获取
3. ✅ **开发者令牌** - 从第二步获取（需要等1-2天）
4. ✅ **刷新令牌** - 从第三步获取
5. ✅ **MCC账号ID** - 从第四步获取

---

## 如果遇到问题

### 问题1：找不到"API中心"
- 确保你登录的是Google Ads账号，不是Google Cloud
- 确保你的账号有管理员权限

### 问题2：开发者令牌申请被拒绝
- 在申请时详细说明用途
- 说明只是用于数据分析，不会修改广告
- 可以重新申请

### 问题3：脚本运行出错
- 确保已经安装了：`pip install google-auth-oauthlib google-auth`
- 确保客户端ID和密钥填写正确（不要有空格）

### 问题4：看不懂英文界面
- 可以在浏览器设置中把Google网站改成中文
- 或者用浏览器翻译功能

---

## 下一步

获取到这5个信息后，告诉我，我会帮你：
1. 在系统中配置这些信息
2. 测试连接是否成功
3. 开始自动同步数据

如果还有不懂的地方，直接问我！

