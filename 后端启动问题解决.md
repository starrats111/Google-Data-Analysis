# 后端启动问题解决

## 遇到的问题

1. **psycopg2 安装失败** - 缺少 PostgreSQL 开发工具
2. **依赖未正确安装** - ModuleNotFoundError
3. **uvicorn 命令找不到** - 依赖未安装

## 解决步骤

### 方法1：使用 psycopg2-binary（推荐）

`requirements.txt` 中已经使用了 `psycopg2-binary`，这个包不需要编译，应该更容易安装。

在虚拟环境中重新安装依赖：

```powershell
cd "D:\Google Analysis\backend"
.\venv\Scripts\Activate.ps1
pip install --upgrade pip
pip install -r requirements.txt
```

### 方法2：如果 psycopg2-binary 仍然失败

可以尝试先安装其他依赖，最后安装 psycopg2-binary：

```powershell
pip install fastapi uvicorn sqlalchemy pydantic pydantic-settings python-jose passlib python-multipart pandas openpyxl python-dotenv
pip install psycopg2-binary
```

### 方法3：如果 PostgreSQL 未安装

如果系统没有安装 PostgreSQL，可以：
1. 安装 PostgreSQL（推荐）
2. 或者暂时使用 SQLite（需要修改配置）

## 验证安装

安装完成后，验证关键包：

```powershell
python -c "import fastapi; print('FastAPI OK')"
python -c "import uvicorn; print('Uvicorn OK')"
python -c "import sqlalchemy; print('SQLAlchemy OK')"
```

## 然后初始化数据库

```powershell
python scripts/init_db.py
python scripts/init_users.py
python scripts/init_platforms.py
```

## 启动服务

```powershell
uvicorn app.main:app --reload
```
















