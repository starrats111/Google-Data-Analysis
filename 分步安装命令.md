# 分步安装命令（避免编译问题）

## 在 PowerShell 中按顺序执行

### 步骤1：进入目录并激活虚拟环境

```powershell
cd "D:\Google Analysis\backend"
.\venv\Scripts\Activate.ps1
```

### 步骤2：安装基础依赖（不需要编译）

```powershell
pip install fastapi
pip install uvicorn
pip install sqlalchemy
pip install python-jose
pip install passlib
pip install python-multipart
pip install openpyxl
pip install python-dotenv
```

### 步骤3：安装旧版本的 pydantic（有预编译版本）

```powershell
pip install pydantic==2.4.2
pip install pydantic-settings==2.0.3
```

### 步骤4：验证所有包已安装

```powershell
python -c "import fastapi; print('FastAPI: OK')"
python -c "import sqlalchemy; print('SQLAlchemy: OK')"
python -c "import uvicorn; print('Uvicorn: OK')"
python -c "import pydantic; print('Pydantic: OK')"
```

如果都显示 "OK"，继续下一步。

### 步骤5：初始化数据库

```powershell
python scripts/init_db.py
```

### 步骤6：初始化用户

```powershell
python scripts/init_users.py
```

### 步骤7：初始化联盟平台

```powershell
python scripts/init_platforms.py
```

### 步骤8：启动服务

```powershell
uvicorn app.main:app --reload
```

## 如果步骤3仍然失败

可以尝试更旧的版本：

```powershell
pip install pydantic==2.0.0
pip install pydantic-settings==2.0.0
```

或者暂时跳过 pydantic-settings，修改代码使用环境变量。













