// Sample data for articles
const articlesData = [
    {
        id: 1,
        title: "Spring Fashion Trends 2024",
        category: "fashion",
        categoryName: "Fashion & Accessories",
        excerpt: "Discover the latest spring fashion trends that will define your wardrobe this season.",
        image: "üå∏",
        heroImage: "https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200&h=600&fit=crop",
        inlineImage1: "https://images.unsplash.com/photo-1469334031218-e382a71b716b?w=800&h=600&fit=crop",
        inlineImage2: "https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=800&h=600&fit=crop",
        date: "June 15, 2025",
        author: "Sarah Johnson",
        products: ["Silk Scarf", "Leather Bag", "Sunglasses"],
        content: [
            "As the winter chill fades away and nature begins to bloom, fashion enthusiasts eagerly anticipate the arrival of spring collections. This season brings a refreshing palette of colors, innovative silhouettes, and sustainable fashion choices that reflect our evolving lifestyle needs.",
            "The 2024 spring fashion landscape is characterized by a harmonious blend of comfort and elegance. Designers have embraced softer fabrics, flowing lines, and versatile pieces that transition seamlessly from day to night. Pastel hues dominate the color spectrum, with lavender, mint green, and soft peach making strong appearances across runways and street style alike.",
            "IMAGE1",
            "One of the most notable trends this season is the revival of romantic aesthetics. Floral prints, delicate lace details, and billowy sleeves create a dreamy, feminine appeal. These elements are being paired with modern accessories like chunky platform sandals and structured handbags, creating an interesting contrast between soft and hard elements.",
            "Sustainability continues to be a driving force in fashion. Many brands are introducing eco-friendly materials and production methods, making it easier for consumers to make conscious choices without sacrificing style. Organic cotton, recycled polyester, and innovative plant-based fabrics are becoming mainstream options.",
            "IMAGE2",
            "Accessories play a crucial role in completing the spring look. Statement jewelry, particularly layered necklaces and oversized earrings, add personality to minimalist outfits. Scarves in silk and chiffon provide both warmth and style during transitional weather, while sunglasses with unique frame shapes protect and enhance your aesthetic.",
            "The key to mastering spring 2024 fashion lies in versatility. Invest in pieces that can be layered, mixed, and matched to create multiple looks. A well-curated spring wardrobe should include lightweight jackets, flowy dresses, comfortable trousers, and timeless accessories that reflect your personal style while embracing the season's trends."
        ]
    },
    {
        id: 2,
        title: "Natural Skincare Routine",
        category: "health",
        categoryName: "Health & Beauty",
        excerpt: "Learn how to create an effective natural skincare routine for glowing, healthy skin.",
        image: "üíÜ",
        heroImage: "https://images.unsplash.com/photo-1556228578-0d85b1a4d571?w=1200&h=600&fit=crop",
        inlineImage1: "https://images.unsplash.com/photo-1556229010-6c3f2c9ca5f8?w=800&h=600&fit=crop",
        inlineImage2: "https://images.unsplash.com/photo-1571875257727-256c39da42af?w=800&h=600&fit=crop",
        date: "June 20, 2025",
        author: "Emma Davis",
        products: ["Face Serum", "Moisturizer", "Cleanser"],
        content: [
            "Achieving radiant, healthy skin doesn't require expensive products or complicated routines. A natural skincare approach focuses on nourishing your skin with gentle, plant-based ingredients that work in harmony with your body's natural processes. This comprehensive guide will help you build an effective skincare routine that promotes long-term skin health.",
            "Understanding your skin type is the foundation of any successful skincare routine. Whether you have oily, dry, combination, or sensitive skin, natural ingredients can address your specific concerns. The key is consistency and patience, as natural skincare often takes time to show results but provides lasting benefits without harsh side effects.",
            "IMAGE1",
            "A proper natural skincare routine begins with gentle cleansing. Look for cleansers containing ingredients like chamomile, green tea extract, or aloe vera, which remove impurities without stripping your skin's natural oils. Cleansing twice daily‚Äîmorning and evening‚Äîhelps maintain a clean canvas for other products to work effectively.",
            "Exfoliation is crucial for removing dead skin cells and promoting cell turnover. Natural exfoliants like oatmeal, sugar, or finely ground coffee provide gentle physical exfoliation. Chemical exfoliants derived from fruits, such as alpha-hydroxy acids from citrus fruits or lactic acid from milk, offer deeper exfoliation for more advanced routines.",
            "IMAGE2",
            "Hydration is essential for maintaining skin's elasticity and preventing premature aging. Natural moisturizers containing hyaluronic acid, jojoba oil, or shea butter provide deep hydration without clogging pores. For those with oily skin, lightweight serums with natural ingredients like niacinamide or tea tree oil can balance oil production while maintaining moisture.",
            "Sun protection remains the most important step in any skincare routine. Natural mineral sunscreens containing zinc oxide or titanium dioxide provide broad-spectrum protection without chemical filters. Remember to reapply throughout the day, especially if you're spending extended time outdoors.",
            "Building a natural skincare routine is a journey of self-discovery. Listen to your skin, adjust products as needed, and remember that true beauty comes from healthy, well-cared-for skin. With patience and the right natural ingredients, you can achieve a glowing complexion that reflects your inner vitality."
        ]
    },
    {
        id: 3,
        title: "Modern Minimalist Home Design",
        category: "home",
        categoryName: "Home & Garden",
        excerpt: "Transform your living space with these minimalist design principles and tips.",
        image: "üè†",
        heroImage: "https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=1200&h=600&fit=crop",
        inlineImage1: "https://images.unsplash.com/photo-1583847268964-b28dc8f51f92?w=800&h=600&fit=crop",
        inlineImage2: "image/1.png",
        date: "July 5, 2025",
        author: "Michael Chen",
        products: ["Wall Art", "Plant Pot", "Cushion"],
        content: [
            "Minimalist home design has evolved from a simple aesthetic choice to a lifestyle philosophy that emphasizes intentional living, reduced clutter, and mindful consumption. This approach to interior design creates spaces that are not only visually appealing but also promote mental clarity and well-being.",
            "The core principle of minimalist design is 'less is more.' This doesn't mean your home should be stark or empty, but rather that every element serves a purpose and brings joy. The goal is to create a serene environment where you can relax, focus, and thrive without visual distractions.",
            "IMAGE1",
            "Color plays a crucial role in minimalist interiors. A neutral palette of whites, beiges, grays, and soft earth tones creates a calming foundation. These colors allow architectural details and carefully chosen furniture pieces to take center stage. Accent colors, when used, are typically muted and appear sparingly to maintain the peaceful atmosphere.",
            "Furniture selection in minimalist design prioritizes quality over quantity. Each piece should be functional, well-crafted, and beautiful in its simplicity. Clean lines, natural materials like wood and stone, and comfortable proportions create spaces that feel both modern and timeless. Multi-functional furniture helps maximize space while maintaining the uncluttered aesthetic.",
            "IMAGE2",
            "Lighting is essential in minimalist spaces. Natural light is maximized through large windows and minimal window treatments. When artificial lighting is needed, simple fixtures with clean designs provide ambient, task, and accent lighting without overwhelming the space. The interplay of light and shadow becomes a design element itself.",
            "Storage solutions are key to maintaining a minimalist home. Built-in storage, hidden compartments, and furniture with integrated storage help keep belongings organized and out of sight. The philosophy extends to decluttering regularly, keeping only items that serve a purpose or bring genuine joy.",
            "Plants and natural elements bring life to minimalist spaces without adding visual clutter. A few well-chosen plants, natural textures like wood and stone, and perhaps a single piece of meaningful art create warmth and personality while maintaining the clean aesthetic.",
            "Embracing minimalist design is about creating a home that supports your lifestyle and values. It's a journey of letting go of the unnecessary and focusing on what truly matters. The result is a space that feels spacious, peaceful, and uniquely yours."
        ]
    },
    {
        id: 4,
        title: "Hidden Gems of Europe",
        category: "travel",
        categoryName: "Travel & Accommodation",
        excerpt: "Explore the most beautiful and less-known destinations across Europe.",
        image: "‚úàÔ∏è",
        heroImage: "https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?w=1200&h=600&fit=crop",
        inlineImage1: "https://images.unsplash.com/photo-1502602898657-3e91760cbb34?w=800&h=600&fit=crop",
        inlineImage2: "https://images.unsplash.com/photo-1516483638261-f4dbaf036963?w=800&h=600&fit=crop",
        date: "July 18, 2025",
        author: "David Wilson",
        products: ["Travel Guide", "Luggage", "Camera"],
        content: [
            "While Paris, Rome, and London attract millions of visitors each year, Europe is home to countless hidden gems that offer equally stunning experiences without the crowds. These lesser-known destinations provide authentic cultural experiences, breathtaking landscapes, and the opportunity to discover Europe's true charm.",
            "Venturing off the beaten path rewards travelers with unique experiences and memories that last a lifetime. From medieval villages frozen in time to coastal towns with pristine beaches, these hidden gems showcase Europe's diverse beauty and rich history.",
            "IMAGE1",
            "The Algarve region in Portugal, while gaining popularity, still offers secluded coves and charming fishing villages that feel worlds away from tourist hotspots. The dramatic cliffs, golden beaches, and traditional whitewashed buildings create a picturesque setting perfect for relaxation and exploration.",
            "Slovenia's Lake Bled is a fairytale destination that often gets overlooked. The emerald-green lake, medieval castle perched on a cliff, and the island church in the center create a scene straight from a storybook. The surrounding Julian Alps offer excellent hiking opportunities for nature enthusiasts.",
            "IMAGE2",
            "The Faroe Islands, located between Iceland and Norway, provide a raw, untouched beauty that's increasingly rare in Europe. The dramatic landscapes, traditional grass-roofed houses, and friendly locals make this archipelago a unique destination for adventurous travelers seeking something truly different.",
            "Romania's Transylvania region offers more than just Dracula legends. The fortified churches, medieval towns like Sighi»ôoara, and the Carpathian Mountains provide a rich cultural and natural experience. The region's traditional villages maintain centuries-old customs and architecture.",
            "These hidden gems remind us that travel is about discovery and connection. By exploring beyond the well-trodden paths, we not only support local communities but also create more meaningful travel experiences. Each destination has its own story, waiting to be discovered by curious travelers willing to venture off the map."
        ]
    },
    {
        id: 5,
        title: "Investment Strategies for Beginners",
        category: "finance",
        categoryName: "Finance & Insurance",
        excerpt: "A comprehensive guide to starting your investment journey with confidence.",
        image: "üí∞",
        heroImage: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=1200&h=600&fit=crop",
        inlineImage1: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=800&h=600&fit=crop",
        inlineImage2: "https://images.unsplash.com/photo-1553729459-efe14ef6055d?w=800&h=600&fit=crop",
        date: "August 2, 2025",
        author: "Lisa Anderson",
        products: ["Investment Book", "Calculator", "Notebook"],
        content: [
            "Starting your investment journey can feel overwhelming, but with the right knowledge and approach, anyone can build wealth over time. This comprehensive guide will help you understand the fundamentals of investing and develop a strategy that aligns with your financial goals and risk tolerance.",
            "Before diving into specific investment strategies, it's crucial to establish a solid financial foundation. This means having an emergency fund covering three to six months of expenses, paying off high-interest debt, and understanding your current financial situation. Only invest money you won't need in the short term.",
            "IMAGE1",
            "Understanding your investment goals and time horizon is the first step in developing a strategy. Are you saving for retirement, a down payment on a house, or your children's education? Each goal has a different time frame and risk tolerance, which will influence your investment choices.",
            "Diversification is one of the most important principles in investing. By spreading your investments across different asset classes‚Äîstocks, bonds, real estate, and commodities‚Äîyou reduce risk. A well-diversified portfolio might include index funds, which provide exposure to broad market segments with low fees.",
            "IMAGE2",
            "For beginners, starting with low-cost index funds or exchange-traded funds (ETFs) is often the best approach. These investment vehicles provide instant diversification and are managed passively, resulting in lower fees. They track market indices, so you're investing in the overall market's performance rather than trying to pick individual stocks.",
            "Dollar-cost averaging is a strategy that involves investing a fixed amount regularly, regardless of market conditions. This approach helps reduce the impact of market volatility and removes the pressure of trying to time the market perfectly. It's particularly effective for long-term investors.",
            "Understanding risk and return is essential. Generally, investments with higher potential returns also carry higher risk. Your risk tolerance depends on factors like your age, financial situation, and investment goals. Younger investors typically can afford to take more risk, while those nearing retirement may prefer more conservative approaches.",
            "Regularly reviewing and rebalancing your portfolio ensures it stays aligned with your goals and risk tolerance. As markets fluctuate, your asset allocation may drift from your target. Rebalancing involves selling some investments and buying others to restore your desired allocation.",
            "Remember, investing is a long-term journey. Market fluctuations are normal, and trying to time the market often leads to poor results. Stay disciplined, continue learning, and adjust your strategy as your financial situation and goals evolve. With patience and consistency, you can build significant wealth over time."
        ]
    },
    {
        id: 6,
        title: "Artisan Coffee Brewing Techniques",
        category: "food",
        categoryName: "Food & Beverage",
        excerpt: "Master the art of brewing perfect coffee at home with these professional techniques.",
        image: "‚òï",
        heroImage: "https://images.unsplash.com/photo-1517487881594-2787fef5ebf7?w=1200&h=600&fit=crop",
        inlineImage1: "https://images.unsplash.com/photo-1510591509098-f4fdc6d0ff04?w=800&h=600&fit=crop",
        inlineImage2: "https://images.unsplash.com/photo-1497935586351-b67a49e012bf?w=800&h=600&fit=crop",
        date: "August 15, 2025",
        author: "James Brown",
        products: ["Coffee Beans", "French Press", "Grinder"],
        content: [
            "Brewing exceptional coffee at home is both an art and a science. While it may seem complex, understanding a few key principles and techniques can transform your daily cup from ordinary to extraordinary. This guide will help you master the fundamentals of artisan coffee brewing.",
            "The foundation of great coffee starts with quality beans. Freshly roasted, high-quality beans make the most significant difference in flavor. Look for beans roasted within the past two weeks, and consider buying from local roasters who can provide information about origin, roast date, and flavor profiles.",
            "IMAGE1",
            "Grinding your beans just before brewing is crucial for optimal flavor. Coffee begins to lose its aromatic compounds immediately after grinding, so investing in a good burr grinder is essential. Burr grinders provide consistent particle size, which is key to even extraction. The grind size should match your brewing method‚Äîfiner for espresso, medium for drip, and coarser for French press.",
            "Water quality and temperature significantly impact your coffee's taste. Use filtered water free from strong odors or flavors. The ideal brewing temperature is between 195¬∞F and 205¬∞F (90¬∞C to 96¬∞C). Water that's too hot will extract bitter compounds, while water that's too cool will result in under-extracted, sour coffee.",
            "IMAGE2",
            "The coffee-to-water ratio is another critical factor. A general starting point is 1:15 to 1:17 (coffee to water by weight). For example, 20 grams of coffee to 300 grams of water. However, this can be adjusted based on your taste preferences. Stronger coffee requires a higher ratio, while lighter coffee uses less.",
            "Different brewing methods extract flavors differently. The French press offers full-bodied coffee with rich oils. Pour-over methods like V60 or Chemex provide clean, bright cups with clarity of flavor. Espresso machines create concentrated, intense shots, while AeroPress offers versatility and portability.",
            "Mastering the pour-over technique involves a consistent, controlled pour in a spiral pattern, starting from the center and moving outward. This ensures even saturation of the coffee grounds. The bloom‚Äîpouring a small amount of water to let the coffee degas‚Äîis essential for fresh beans and should last 30-45 seconds.",
            "Patience and practice are key to perfecting your brewing technique. Keep a brewing journal to track variables like grind size, water temperature, brew time, and ratios. Small adjustments can make significant differences in flavor. With time and experimentation, you'll develop the skills to consistently brew coffee that rivals your favorite caf√©."
        ]
    }
];

// Get URL parameters
function getUrlParameter(name) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(name);
}

// Convert title to URL-friendly slug
function titleToSlug(title) {
    return title
        .toLowerCase()
        .replace(/[^\w\s-]/g, '') // Remove special characters
        .replace(/\s+/g, '-')      // Replace spaces with hyphens
        .replace(/-+/g, '-')       // Replace multiple hyphens with single hyphen
        .trim();
}

// Render articles
function renderArticles(articles, containerId) {
    const container = document.getElementById(containerId);
    if (!container) return;

    container.innerHTML = articles.map(article => {
        const articleSlug = titleToSlug(article.title);
        return `
        <article class="article-card">
            <a href="article.html?title=${encodeURIComponent(articleSlug)}" class="article-card-link">
                <div class="article-image">
                    <img src="${article.heroImage || 'https://images.unsplash.com/photo-1499750310107-5fef28a66643?w=800&h=600&fit=crop'}" alt="${article.title}" loading="lazy">
                    <div class="article-image-overlay">
                        <span class="article-category">${article.categoryName}</span>
                        <h2 class="article-title">${article.title}</h2>
                        <p class="article-excerpt">${article.excerpt}</p>
                    </div>
                </div>
                <div class="article-content">
                    <div class="article-meta">
                        <span>By ${article.author}</span>
                        <span>${article.date}</span>
                    </div>
                </div>
            </a>
        </article>
    `;
    }).join('');
}

// Pagination
let currentPage = 1;
const articlesPerPage = 6;

function renderPagination(totalArticles, containerId) {
    const container = document.getElementById(containerId);
    if (!container) return;

    const totalPages = Math.ceil(totalArticles / articlesPerPage);
    if (totalPages <= 1) {
        container.innerHTML = '';
        return;
    }

    let paginationHTML = '';
    
    // Previous button with arrow
    if (currentPage > 1) {
        paginationHTML += `<button class="pagination-btn pagination-nav" onclick="changePage(${currentPage - 1})" title="Previous page">
            <span>‚Üê Prev</span>
        </button>`;
    }

    // First page
    if (currentPage > 3 && totalPages > 5) {
        paginationHTML += `<button class="pagination-btn" onclick="changePage(1)">
            <span>1</span>
        </button>`;
        if (currentPage > 4) {
            paginationHTML += `<span class="pagination-btn pagination-ellipsis"><span>...</span></span>`;
        }
    }

    // Page numbers around current page
    const startPage = Math.max(1, currentPage - 1);
    const endPage = Math.min(totalPages, currentPage + 1);
    
    for (let i = startPage; i <= endPage; i++) {
        paginationHTML += `<button class="pagination-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">
            <span>${i}</span>
        </button>`;
    }

    // Last page
    if (currentPage < totalPages - 2 && totalPages > 5) {
        if (currentPage < totalPages - 3) {
            paginationHTML += `<span class="pagination-btn pagination-ellipsis"><span>...</span></span>`;
        }
        paginationHTML += `<button class="pagination-btn" onclick="changePage(${totalPages})">
            <span>${totalPages}</span>
        </button>`;
    }

    // Next button with arrow
    if (currentPage < totalPages) {
        paginationHTML += `<button class="pagination-btn pagination-nav" onclick="changePage(${currentPage + 1})" title="Next page">
            <span>Next ‚Üí</span>
        </button>`;
    }

    container.innerHTML = paginationHTML;
}

function changePage(page) {
    currentPage = page;
    const category = getUrlParameter('cat');
    let filteredArticles = category 
        ? articlesData.filter(a => a.category === category)
        : articlesData;

    const startIndex = (currentPage - 1) * articlesPerPage;
    const endIndex = startIndex + articlesPerPage;
    const paginatedArticles = filteredArticles.slice(startIndex, endIndex);

    renderArticles(paginatedArticles, 'articlesGrid');
    renderPagination(filteredArticles.length, 'pagination');
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Initialize page
function initPage() {
    const category = getUrlParameter('cat');
    const articleTitle = getUrlParameter('title');

    if (articleTitle) {
        // Load article page by title slug
        loadArticleByTitle(articleTitle);
    } else if (category) {
        // Load category page
        loadCategory(category);
    } else {
        // Load home page
        loadHome();
    }
}

function loadHome() {
    const startIndex = (currentPage - 1) * articlesPerPage;
    const endIndex = startIndex + articlesPerPage;
    const paginatedArticles = articlesData.slice(startIndex, endIndex);

    renderArticles(paginatedArticles, 'articlesGrid');
    renderPagination(articlesData.length, 'pagination');
}

function loadCategory(category) {
    const categoryNames = {
        fashion: "Fashion & Accessories",
        health: "Health & Beauty",
        home: "Home & Garden",
        travel: "Travel & Accommodation",
        finance: "Finance & Insurance",
        food: "Food & Beverage"
    };

    const categoryLinks = {
        fashion: "category.html?cat=fashion",
        health: "category.html?cat=health",
        home: "category.html?cat=home",
        travel: "category.html?cat=travel",
        finance: "category.html?cat=finance",
        food: "category.html?cat=food"
    };

    const filteredArticles = articlesData.filter(a => a.category === category);
    const startIndex = (currentPage - 1) * articlesPerPage;
    const endIndex = startIndex + articlesPerPage;
    const paginatedArticles = filteredArticles.slice(startIndex, endIndex);

    // Update page title
    const heroTitle = document.querySelector('.hero-title') || document.getElementById('categoryTitle');
    const heroSubtitle = document.querySelector('.hero-subtitle') || document.getElementById('categorySubtitle');
    
    if (heroTitle) heroTitle.textContent = categoryNames[category] || 'Category';
    if (heroSubtitle) heroSubtitle.textContent = `Explore our ${categoryNames[category] || 'category'} articles`;

    // Update active nav link
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === categoryLinks[category]) {
            link.classList.add('active');
        }
    });

    renderArticles(paginatedArticles, 'articlesGrid');
    renderPagination(filteredArticles.length, 'pagination');
}

function loadArticleByTitle(titleSlug) {
    // Find article by matching title slug
    const article = articlesData.find(a => titleToSlug(a.title) === titleSlug);
    if (!article) {
        window.location.href = 'index.html';
        return;
    }
    
    loadArticleContent(article);
}

function loadArticleContent(article) {
    // This function contains the article rendering logic

    // Build article content with images
    let articleBodyHTML = '';
    if (article.content && Array.isArray(article.content)) {
        let image1Inserted = false;
        let image2Inserted = false;
        
        article.content.forEach((paragraph, index) => {
            if (paragraph === 'IMAGE1' && article.inlineImage1 && !image1Inserted) {
                articleBodyHTML += `
                    <div class="article-inline-image">
                        <img src="${article.inlineImage1}" alt="${article.title}" loading="lazy">
                    </div>
                `;
                image1Inserted = true;
            } else if (paragraph === 'IMAGE2' && article.inlineImage2 && !image2Inserted) {
                articleBodyHTML += `
                    <div class="article-inline-image">
                        <img src="${article.inlineImage2}" alt="${article.title}" loading="lazy">
                    </div>
                `;
                image2Inserted = true;
            } else if (paragraph && paragraph !== 'IMAGE1' && paragraph !== 'IMAGE2') {
                articleBodyHTML += `<p>${paragraph}</p>`;
            }
        });
    } else {
        // Fallback for articles without content array
        articleBodyHTML = `
            <p>${article.excerpt}</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.</p>
        `;
    }

    // Use heroImage if available, otherwise use emoji
    const heroImageHTML = article.heroImage 
        ? `<img src="${article.heroImage}" alt="${article.title}" class="article-hero-image" loading="eager">`
        : `<div class="article-image" style="height: 400px; display: flex; align-items: center; justify-content: center; font-size: 8rem; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); border-radius: 20px;">${article.image}</div>`;

    // Update article page content
    const articleContent = document.getElementById('articleContent');
    if (articleContent) {
        articleContent.innerHTML = `
            <article class="article-page">
                <div class="article-header">
                    <span class="article-category">${article.categoryName}</span>
                    <h1 class="article-page-title">${article.title}</h1>
                    <div class="article-meta" style="justify-content: center; border: none; padding: 0;">
                        <span>By ${article.author}</span>
                        <span style="margin: 0 1rem;">‚Ä¢</span>
                        <span>${article.date}</span>
                    </div>
                </div>
                ${heroImageHTML}
                <div class="article-body">
                    ${articleBodyHTML}
                </div>
            </article>
        `;
        
        // Setup search after content is loaded
        setTimeout(setupSearch, 100);
    } else {
        // If articleContent doesn't exist, redirect to index
        window.location.href = 'index.html';
    }
}

// Search functionality
function setupSearch() {
    const searchBoxes = document.querySelectorAll('.search-box');
    searchBoxes.forEach(searchBox => {
        // Remove existing listeners to avoid duplicates
        const newSearchBox = searchBox.cloneNode(true);
        searchBox.parentNode.replaceChild(newSearchBox, searchBox);
        
        newSearchBox.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const query = this.value.toLowerCase().trim();
                if (!query) return;
                
                const filtered = articlesData.filter(article => 
                    article.title.toLowerCase().includes(query) ||
                    article.excerpt.toLowerCase().includes(query) ||
                    article.categoryName.toLowerCase().includes(query)
                );
                
                // Reset to page 1 for search results
                currentPage = 1;
                
                if (filtered.length > 0) {
                    const startIndex = 0;
                    const endIndex = articlesPerPage;
                    const paginatedArticles = filtered.slice(startIndex, endIndex);
                    
                    // Update page title for search results
                    const heroTitle = document.querySelector('.hero-title') || document.getElementById('categoryTitle');
                    const heroSubtitle = document.querySelector('.hero-subtitle') || document.getElementById('categorySubtitle');
                    
                    if (heroTitle) heroTitle.textContent = `Search Results: "${query}"`;
                    if (heroSubtitle) heroSubtitle.textContent = `Found ${filtered.length} article(s)`;
                    
                    renderArticles(paginatedArticles, 'articlesGrid');
                    renderPagination(filtered.length, 'pagination');
                } else {
                    const articlesGrid = document.getElementById('articlesGrid');
                    if (articlesGrid) {
                        articlesGrid.innerHTML = '<p style="text-align: center; color: var(--text-secondary); padding: 3rem;">No articles found matching your search.</p>';
                    }
                    const pagination = document.getElementById('pagination');
                    if (pagination) pagination.innerHTML = '';
                }
            }
        });
    });
}

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    initPage();
    setupSearch();
});

