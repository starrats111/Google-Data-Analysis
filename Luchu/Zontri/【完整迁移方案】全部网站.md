# ğŸ“¦ åšå®¢ç½‘ç«™æ•°æ®è¿ç§»æ–¹æ¡ˆï¼ˆå…¨éƒ¨9ä¸ªç½‘ç«™ï¼‰

> **åˆ›å»ºæ—¥æœŸ**: 2026-02-13  
> **è´Ÿè´£äºº**: wj07  
> **é¢„è®¡æ€»æ—¶é—´**: æ¯ä¸ªç½‘ç«™1-2å°æ—¶

---

## ğŸ“‹ è¿ç§»æ¦‚è§ˆ

| æˆå‘˜ | ç½‘ç«™åç§° | ä»“åº“åœ°å€ | æ•°æ®æ–‡ä»¶ä½ç½® | ç‰¹æ®Šå¤„ç† |
|------|----------|----------|--------------|----------|
| wj01 | EverydayHaven | starrats111/EverydayHaven | `js/data.js` | æ ‡å‡†è¿ç§» |
| wj02 | Quiblo | starrats111/Quiblo | `data.js`ï¼ˆæ ¹ç›®å½•ï¼‰ | âš ï¸ éœ€å…ˆç§»åŠ¨æ–‡ä»¶ |
| wj03 | Kivanta | starrats111/kivanta | `js/data.js` | æ ‡å‡†è¿ç§» |
| wj04 | Novanest | starrats111/novanest | `js/data.js` | æ ‡å‡†è¿ç§» |
| wj05 | Zontri | starrats111/zontri | `js/data.js` | âš ï¸ æœ‰äº§å“æ¨¡å— |
| wj06 | AllurahHub | starrats111/allurahub | `js/data.js` | æ ‡å‡†è¿ç§» |
| wj07 | VitaHaven | starrats111/vitahaven | `js/data.js` | æ ‡å‡†è¿ç§» |
| wj08 | â€” | â€” | â€” | âŒ å·²ç¦»èŒ |
| wj09 | BloomRoots | starrats111/bloomroots | `js/data.js` | æ ‡å‡†è¿ç§» |
| wj10 | VitaSphere | starrats111/vitasphere | `js/data.js` | æ ‡å‡†è¿ç§» |

---

## ä¸€ã€è¿ç§»ç›®çš„

å°†åšå®¢æ–‡ç« ä»**å•ä¸€å¤§æ–‡ä»¶**è¿ç§»åˆ°**æ¯ç¯‡æ–‡ç« ç‹¬ç«‹æ–‡ä»¶**çš„å­˜å‚¨æ–¹å¼ã€‚

### è¿ç§»å‰åå¯¹æ¯”

| ç»´åº¦ | è¿ç§»å‰ | è¿ç§»å |
|------|--------|--------|
| **å­˜å‚¨æ–¹å¼** | æ‰€æœ‰æ–‡ç« åœ¨ä¸€ä¸ªæ–‡ä»¶ | ç´¢å¼• + æ¯ç¯‡ç‹¬ç«‹JSON |
| **é¦–é¡µåŠ è½½** | å…¨éƒ¨æ•°æ®ï¼ˆå¯èƒ½500KB+ï¼‰ | ä»…ç´¢å¼•ï¼ˆ~20KBï¼‰ |
| **è¯¦æƒ…é¡µ** | æ•°æ®å·²åœ¨å†…å­˜ | æŒ‰éœ€åŠ è½½ï¼ˆ~5KB/ç¯‡ï¼‰ |
| **Gitå†²çª** | å¤šäººç¼–è¾‘ä¼šå†²çª | é›¶å†²çª |
| **å®¹é”™æ€§** | ä¸€å¤„é”™è¯¯å…¨ç«™å´© | å•ç¯‡ç‹¬ç«‹ |
| **æ‰©å±•æ€§** | <50ç¯‡ | 1000+ç¯‡ |

### è¿ç§»åç›®å½•ç»“æ„

```
ç½‘ç«™ä»“åº“/
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ data.js.backup       # åŸå§‹å¤‡ä»½
â”‚   â”œâ”€â”€ articles-index.js    # ã€æ–°ã€‘ç´¢å¼•æ–‡ä»¶
â”‚   â””â”€â”€ articles/            # ã€æ–°ã€‘æ–‡ç« ç›®å½•
â”‚       â”œâ”€â”€ 1.json
â”‚       â”œâ”€â”€ 2.json
â”‚       â””â”€â”€ ...
â”œâ”€â”€ index.html
â”œâ”€â”€ article.html
â””â”€â”€ ...
```

---

## äºŒã€é€šç”¨è¿ç§»è„šæœ¬

ä»¥ä¸‹è„šæœ¬é€‚ç”¨äº**æ‰€æœ‰ç½‘ç«™**ï¼Œåªéœ€ä¿®æ”¹é…ç½®éƒ¨åˆ†ã€‚

### 2.1 è¿ç§»è„šæœ¬ `migrate.js`

åœ¨ç½‘ç«™ä»“åº“æ ¹ç›®å½•åˆ›å»ºæ­¤æ–‡ä»¶ï¼š

```javascript
/**
 * åšå®¢æ•°æ®è¿ç§»è„šæœ¬
 * 
 * åŠŸèƒ½ï¼šå°† js/data.js æ‹†åˆ†ä¸ºï¼š
 * - js/articles-index.js (ç´¢å¼•)
 * - js/articles/*.json (å•ç¯‡æ–‡ç« )
 * 
 * ä½¿ç”¨ï¼šnode migrate.js
 */

const fs = require('fs');
const path = require('path');

// ================== é…ç½®åŒºåŸŸ ==================
// ã€é‡è¦ã€‘æ ¹æ®ä¸åŒç½‘ç«™ä¿®æ”¹æ­¤å¤„
const CONFIG = {
  // æºæ–‡ä»¶è·¯å¾„ï¼ˆwj02éœ€æ”¹ä¸º 'data.js'ï¼‰
  sourceFile: 'js/data.js',
  
  // è¾“å‡ºè·¯å¾„
  outputIndexFile: 'js/articles-index.js',
  outputArticlesDir: 'js/articles',
  backupFile: 'js/data.js.backup',
  
  // ç´¢å¼•ä¿ç•™å­—æ®µï¼ˆåˆ—è¡¨é¡µéœ€è¦ï¼‰
  indexFields: [
    'id', 'title', 'slug', 'category', 'categoryName',
    'date', 'image', 'excerpt', 'description', 'featured',
    'author', 'readTime'
  ],
  
  // æ˜¯å¦æœ‰äº§å“æ¨¡å—ï¼ˆwj05è®¾ä¸ºtrueï¼‰
  hasProductModule: false
};
// ================== é…ç½®ç»“æŸ ==================

async function main() {
  console.log('ğŸš€ å¼€å§‹è¿ç§»...\n');
  
  // 1. æ£€æŸ¥æºæ–‡ä»¶
  if (!fs.existsSync(CONFIG.sourceFile)) {
    console.error(`âŒ æ‰¾ä¸åˆ° ${CONFIG.sourceFile}`);
    console.log('è¯·ç¡®ä¿åœ¨ä»“åº“æ ¹ç›®å½•è¿è¡Œæ­¤è„šæœ¬');
    process.exit(1);
  }
  
  // 2. å¤‡ä»½
  console.log('ğŸ“¦ å¤‡ä»½åŸå§‹æ–‡ä»¶...');
  fs.copyFileSync(CONFIG.sourceFile, CONFIG.backupFile);
  console.log(`   âœ“ å·²å¤‡ä»½åˆ° ${CONFIG.backupFile}\n`);
  
  // 3. è¯»å–æ•°æ®
  console.log('ğŸ“– è¯»å–æºæ•°æ®...');
  const sourceContent = fs.readFileSync(CONFIG.sourceFile, 'utf-8');
  const articles = parseArticles(sourceContent);
  console.log(`   âœ“ æ‰¾åˆ° ${articles.length} ç¯‡æ–‡ç« \n`);
  
  if (articles.length === 0) {
    console.error('âŒ æœªæ‰¾åˆ°æ–‡ç« æ•°æ®ï¼Œè¯·æ£€æŸ¥data.jsæ ¼å¼');
    process.exit(1);
  }
  
  // 4. åˆ›å»ºç›®å½•
  console.log('ğŸ“ åˆ›å»ºè¾“å‡ºç›®å½•...');
  if (!fs.existsSync(CONFIG.outputArticlesDir)) {
    fs.mkdirSync(CONFIG.outputArticlesDir, { recursive: true });
  }
  console.log(`   âœ“ ${CONFIG.outputArticlesDir}\n`);
  
  // 5. ç”Ÿæˆç´¢å¼•
  console.log('ğŸ“ ç”Ÿæˆç´¢å¼•æ–‡ä»¶...');
  const indexData = generateIndex(articles);
  const indexContent = `// æ–‡ç« ç´¢å¼• - ç”Ÿæˆäº ${new Date().toISOString()}
// åˆ—è¡¨é¡µä½¿ç”¨æ­¤æ–‡ä»¶ï¼Œè¯¦æƒ…é¡µæŒ‰éœ€åŠ è½½ articles/*.json

const articlesIndex = ${JSON.stringify(indexData, null, 2)};
`;
  fs.writeFileSync(CONFIG.outputIndexFile, indexContent, 'utf-8');
  console.log(`   âœ“ ${CONFIG.outputIndexFile}\n`);
  
  // 6. ç”Ÿæˆå•ç¯‡æ–‡ç« 
  console.log('ğŸ“„ ç”Ÿæˆå•ç¯‡æ–‡ç« æ–‡ä»¶...');
  let count = 0;
  for (const article of articles) {
    const filePath = path.join(CONFIG.outputArticlesDir, `${article.id}.json`);
    fs.writeFileSync(filePath, JSON.stringify(article, null, 2), 'utf-8');
    count++;
    console.log(`   âœ“ ${article.id}.json - ${article.title.substring(0, 30)}...`);
  }
  
  // 7. ç»Ÿè®¡
  console.log('\nğŸ“Š è¿ç§»ç»Ÿè®¡:');
  console.log(`   - åŸæ–‡ä»¶: ${(fs.statSync(CONFIG.backupFile).size / 1024).toFixed(2)} KB`);
  console.log(`   - ç´¢å¼•æ–‡ä»¶: ${(fs.statSync(CONFIG.outputIndexFile).size / 1024).toFixed(2)} KB`);
  console.log(`   - æ–‡ç« æ•°é‡: ${count} ç¯‡`);
  
  // 8. å®Œæˆ
  console.log('\nâœ… è¿ç§»å®Œæˆï¼\n');
  console.log('ğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œ:');
  console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€');
  console.log('1. æ›´æ–°HTMLä¸­çš„scriptå¼•ç”¨:');
  console.log('   å°† <script src="js/data.js"> ');
  console.log('   æ”¹ä¸º <script src="js/articles-index.js">');
  console.log('');
  console.log('2. æ›´æ–°JSä¸­çš„æ–‡ç« åŠ è½½é€»è¾‘ï¼ˆè§æ–‡æ¡£ï¼‰');
  console.log('');
  console.log('3. æœ¬åœ°æµ‹è¯•æ‰€æœ‰åŠŸèƒ½');
  console.log('');
  console.log('4. æ¨é€åˆ°GitHub:');
  console.log('   git add .');
  console.log('   git commit -m "chore: è¿ç§»æ–‡ç« å­˜å‚¨æ ¼å¼"');
  console.log('   git push');
  console.log('â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n');
}

// ================== è§£æå‡½æ•° ==================

function parseArticles(content) {
  try {
    // å°è¯•å¤šç§æ ¼å¼åŒ¹é…
    let match = content.match(/(?:const|let|var)?\s*articles\s*=\s*(\[[\s\S]*\])\s*;?\s*$/);
    
    if (!match) {
      match = content.match(/(?:const|let|var)?\s*articles\s*=\s*(\[[\s\S]*?\]);/);
    }
    
    if (!match) {
      // å°è¯•åŒ¹é…productsæ•°ç»„ï¼ˆæŸäº›ç½‘ç«™å¯èƒ½ç”¨ä¸åŒåç§°ï¼‰
      match = content.match(/(?:const|let|var)?\s*(?:articles|posts|data)\s*=\s*(\[[\s\S]*\])/);
    }
    
    if (!match) {
      throw new Error('æ‰¾ä¸åˆ°æ–‡ç« æ•°ç»„ï¼Œè¯·æ£€æŸ¥data.jsæ ¼å¼');
    }
    
    const parseFunc = new Function(`return ${match[1]}`);
    const result = parseFunc();
    
    if (!Array.isArray(result)) {
      throw new Error('è§£æç»“æœä¸æ˜¯æ•°ç»„');
    }
    
    return result;
  } catch (error) {
    console.error('è§£æé”™è¯¯:', error.message);
    console.log('\nğŸ’¡ æç¤º: è¯·å°†data.jså‰50è¡Œå‘ç»™wj07æ£€æŸ¥');
    process.exit(1);
  }
}

function generateIndex(articles) {
  return articles.map(article => {
    const entry = {};
    
    // å¤åˆ¶ç´¢å¼•å­—æ®µ
    for (const field of CONFIG.indexFields) {
      if (article[field] !== undefined) {
        entry[field] = article[field];
      }
    }
    
    // ç¡®ä¿æœ‰æ‘˜è¦
    if (!entry.excerpt && !entry.description && article.content) {
      const text = article.content.replace(/<[^>]*>/g, '').trim();
      entry.excerpt = text.substring(0, 150) + '...';
    }
    
    // æ ‡è®°äº§å“æ¨¡å—
    entry.hasProducts = !!(article.products && article.products.length > 0);
    
    return entry;
  });
}

// è¿è¡Œ
main();
```

---

## ä¸‰ã€å„ç½‘ç«™è¿ç§»æŒ‡å—

### 3.1 wj01 EverydayHaven

**ä»“åº“**: https://github.com/starrats111/EverydayHaven

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/starrats111/EverydayHaven.git
cd EverydayHaven

# 2. åˆ›å»º migrate.jsï¼ˆå¤åˆ¶ä¸Šæ–¹è„šæœ¬ï¼Œé…ç½®æ— éœ€ä¿®æ”¹ï¼‰

# 3. è¿è¡Œè¿ç§»
node migrate.js

# 4. æ›´æ–°HTMLå’ŒJSï¼ˆè§ç¬¬å››ç« ï¼‰

# 5. æµ‹è¯•å¹¶æ¨é€
git add .
git commit -m "chore: è¿ç§»æ–‡ç« å­˜å‚¨æ ¼å¼"
git push
```

---

### 3.2 wj02 Quiblo âš ï¸ ç‰¹æ®Šå¤„ç†

**ä»“åº“**: https://github.com/starrats111/Quiblo

**ç‰¹æ®Šè¯´æ˜**: data.jsåœ¨æ ¹ç›®å½•ï¼Œéœ€è¦å…ˆç§»åŠ¨

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/starrats111/Quiblo.git
cd Quiblo

# 2. åˆ›å»ºjsç›®å½•å¹¶ç§»åŠ¨data.js
mkdir -p js
mv data.js js/data.js

# 3. æ›´æ–°HTMLä¸­çš„å¼•ç”¨
# å°†æ‰€æœ‰ <script src="data.js"> æ”¹ä¸º <script src="js/data.js">

# 4. åˆ›å»º migrate.jsï¼ˆå¤åˆ¶ä¸Šæ–¹è„šæœ¬ï¼Œé…ç½®æ— éœ€ä¿®æ”¹ï¼‰

# 5. è¿è¡Œè¿ç§»
node migrate.js

# 6. æ›´æ–°HTMLå’ŒJSï¼ˆè§ç¬¬å››ç« ï¼‰

# 7. æµ‹è¯•å¹¶æ¨é€
git add .
git commit -m "chore: è¿ç§»æ–‡ç« å­˜å‚¨æ ¼å¼"
git push
```

---

### 3.3 wj03 Kivanta

**ä»“åº“**: https://github.com/starrats111/kivanta

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/starrats111/kivanta.git
cd kivanta

# 2. åˆ›å»º migrate.jsï¼ˆå¤åˆ¶ä¸Šæ–¹è„šæœ¬ï¼Œé…ç½®æ— éœ€ä¿®æ”¹ï¼‰

# 3. è¿è¡Œè¿ç§»
node migrate.js

# 4. æ›´æ–°HTMLå’ŒJSï¼ˆè§ç¬¬å››ç« ï¼‰

# 5. æµ‹è¯•å¹¶æ¨é€
git add .
git commit -m "chore: è¿ç§»æ–‡ç« å­˜å‚¨æ ¼å¼"
git push
```

---

### 3.4 wj04 Novanest

**ä»“åº“**: https://github.com/starrats111/novanest

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/starrats111/novanest.git
cd novanest

# 2. åˆ›å»º migrate.jsï¼ˆå¤åˆ¶ä¸Šæ–¹è„šæœ¬ï¼Œé…ç½®æ— éœ€ä¿®æ”¹ï¼‰

# 3. è¿è¡Œè¿ç§»
node migrate.js

# 4. æ›´æ–°HTMLå’ŒJSï¼ˆè§ç¬¬å››ç« ï¼‰

# 5. æµ‹è¯•å¹¶æ¨é€
git add .
git commit -m "chore: è¿ç§»æ–‡ç« å­˜å‚¨æ ¼å¼"
git push
```

---

### 3.5 wj05 Zontri âš ï¸ æœ‰äº§å“æ¨¡å—

**ä»“åº“**: https://github.com/starrats111/zontri

**ç‰¹æ®Šè¯´æ˜**: æœ‰äº§å“æ¨¡å—ï¼Œéœ€ä¿®æ”¹é…ç½®

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/starrats111/zontri.git
cd zontri

# 2. åˆ›å»º migrate.js
# ã€é‡è¦ã€‘ä¿®æ”¹é…ç½®ä¸­çš„ hasProductModule: true
```

**migrate.js é…ç½®ä¿®æ”¹**:
```javascript
const CONFIG = {
  sourceFile: 'js/data.js',
  outputIndexFile: 'js/articles-index.js',
  outputArticlesDir: 'js/articles',
  backupFile: 'js/data.js.backup',
  indexFields: [
    'id', 'title', 'slug', 'category', 'categoryName',
    'date', 'image', 'excerpt', 'description', 'featured',
    'author', 'readTime'
  ],
  hasProductModule: true  // â† æ”¹ä¸º true
};
```

```bash
# 3. è¿è¡Œè¿ç§»
node migrate.js

# 4. æ›´æ–°HTMLå’ŒJSï¼ˆè§ç¬¬å››ç« ï¼Œæ³¨æ„äº§å“æ¨¡å—æ¸²æŸ“ï¼‰

# 5. æµ‹è¯•å¹¶æ¨é€
git add .
git commit -m "chore: è¿ç§»æ–‡ç« å­˜å‚¨æ ¼å¼"
git push
```

---

### 3.6 wj06 AllurahHub

**ä»“åº“**: https://github.com/starrats111/allurahub

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/starrats111/allurahub.git
cd allurahub

# 2. åˆ›å»º migrate.jsï¼ˆå¤åˆ¶ä¸Šæ–¹è„šæœ¬ï¼Œé…ç½®æ— éœ€ä¿®æ”¹ï¼‰

# 3. è¿è¡Œè¿ç§»
node migrate.js

# 4. æ›´æ–°HTMLå’ŒJSï¼ˆè§ç¬¬å››ç« ï¼‰

# 5. æµ‹è¯•å¹¶æ¨é€
git add .
git commit -m "chore: è¿ç§»æ–‡ç« å­˜å‚¨æ ¼å¼"
git push
```

---

### 3.7 wj07 VitaHaven

**ä»“åº“**: https://github.com/starrats111/vitahaven

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/starrats111/vitahaven.git
cd vitahaven

# 2. åˆ›å»º migrate.jsï¼ˆå¤åˆ¶ä¸Šæ–¹è„šæœ¬ï¼Œé…ç½®æ— éœ€ä¿®æ”¹ï¼‰

# 3. è¿è¡Œè¿ç§»
node migrate.js

# 4. æ›´æ–°HTMLå’ŒJSï¼ˆè§ç¬¬å››ç« ï¼‰

# 5. æµ‹è¯•å¹¶æ¨é€
git add .
git commit -m "chore: è¿ç§»æ–‡ç« å­˜å‚¨æ ¼å¼"
git push
```

---

### 3.8 wj09 BloomRoots

**ä»“åº“**: https://github.com/starrats111/bloomroots

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/starrats111/bloomroots.git
cd bloomroots

# 2. åˆ›å»º migrate.jsï¼ˆå¤åˆ¶ä¸Šæ–¹è„šæœ¬ï¼Œé…ç½®æ— éœ€ä¿®æ”¹ï¼‰

# 3. è¿è¡Œè¿ç§»
node migrate.js

# 4. æ›´æ–°HTMLå’ŒJSï¼ˆè§ç¬¬å››ç« ï¼‰

# 5. æµ‹è¯•å¹¶æ¨é€
git add .
git commit -m "chore: è¿ç§»æ–‡ç« å­˜å‚¨æ ¼å¼"
git push
```

---

### 3.9 wj10 VitaSphere

**ä»“åº“**: https://github.com/starrats111/vitasphere

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/starrats111/vitasphere.git
cd vitasphere

# 2. åˆ›å»º migrate.jsï¼ˆå¤åˆ¶ä¸Šæ–¹è„šæœ¬ï¼Œé…ç½®æ— éœ€ä¿®æ”¹ï¼‰

# 3. è¿è¡Œè¿ç§»
node migrate.js

# 4. æ›´æ–°HTMLå’ŒJSï¼ˆè§ç¬¬å››ç« ï¼‰

# 5. æµ‹è¯•å¹¶æ¨é€
git add .
git commit -m "chore: è¿ç§»æ–‡ç« å­˜å‚¨æ ¼å¼"
git push
```

---

## å››ã€ç½‘ç«™ä»£ç æ›´æ–°

### 4.1 HTMLæ–‡ä»¶ä¿®æ”¹

åœ¨æ‰€æœ‰HTMLæ–‡ä»¶ä¸­ï¼Œæ‰¾åˆ°ï¼š

```html
<script src="js/data.js"></script>
```

æ”¹ä¸ºï¼š

```html
<script src="js/articles-index.js"></script>
```

**éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶**ï¼ˆè§†ç½‘ç«™ç»“æ„è€Œå®šï¼‰ï¼š
- `index.html`
- `article.html`
- `articles.html`
- `category.html`
- `about.html`
- `contact.html`

---

### 4.2 åˆ—è¡¨é¡µJSï¼ˆåŸºæœ¬ä¸å˜ï¼‰

```javascript
// åŸæ¥ä½¿ç”¨ articlesï¼Œç°åœ¨ä½¿ç”¨ articlesIndex
// åªéœ€æ”¹å˜é‡å

function renderArticleList() {
  // ä½¿ç”¨ articlesIndex ä»£æ›¿åŸæ¥çš„ articles
  articlesIndex.forEach(article => {
    // æ¸²æŸ“é€»è¾‘ä¸å˜
  });
}
```

---

### 4.3 è¯¦æƒ…é¡µJSï¼ˆæ ¸å¿ƒä¿®æ”¹ï¼‰

åœ¨ `js/main.js` ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š

```javascript
// ===============================================
// æ–‡ç« è¯¦æƒ…é¡µåŠ è½½é€»è¾‘ï¼ˆè¿ç§»åå¿…é¡»æ·»åŠ ï¼‰
// ===============================================

/**
 * ä»URLè·å–æ–‡ç« ID
 */
function getArticleId() {
  const params = new URLSearchParams(window.location.search);
  // æ”¯æŒ ?id=1 æˆ– ?slug=xxx ä¸¤ç§æ ¼å¼
  return params.get('id') || params.get('slug');
}

/**
 * ä»ç´¢å¼•ä¸­æŸ¥æ‰¾æ–‡ç« 
 */
function findInIndex(idOrSlug) {
  // æŒ‰IDæŸ¥æ‰¾
  let article = articlesIndex.find(a => String(a.id) === String(idOrSlug));
  // æŒ‰slugæŸ¥æ‰¾
  if (!article) {
    article = articlesIndex.find(a => a.slug === idOrSlug);
  }
  return article;
}

/**
 * å¼‚æ­¥åŠ è½½æ–‡ç« å®Œæ•´å†…å®¹
 */
async function loadArticleContent(id) {
  try {
    const response = await fetch(`js/articles/${id}.json`);
    if (!response.ok) {
      throw new Error('æ–‡ç« åŠ è½½å¤±è´¥');
    }
    return await response.json();
  } catch (error) {
    console.error('åŠ è½½æ–‡ç« å¤±è´¥:', error);
    return null;
  }
}

/**
 * æ¸²æŸ“æ–‡ç« å†…å®¹
 */
function renderArticleContent(article) {
  // è®¾ç½®é¡µé¢æ ‡é¢˜
  document.title = article.title + ' | ' + document.title.split('|').pop();
  
  // æ¸²æŸ“åŸºæœ¬ä¿¡æ¯
  const titleEl = document.getElementById('article-title');
  const dateEl = document.getElementById('article-date');
  const categoryEl = document.getElementById('article-category');
  const imageEl = document.getElementById('article-image');
  const contentEl = document.getElementById('article-content');
  
  if (titleEl) titleEl.textContent = article.title;
  if (dateEl) dateEl.textContent = article.date;
  if (categoryEl) categoryEl.textContent = article.categoryName || article.category;
  if (imageEl) imageEl.src = article.image;
  if (contentEl) contentEl.innerHTML = article.content;
  
  // æ¸²æŸ“äº§å“æ¨¡å—ï¼ˆå¦‚æœ‰ï¼‰
  if (article.products && article.products.length > 0) {
    renderProducts(article.products);
  }
}

/**
 * æ¸²æŸ“äº§å“æ¨¡å—
 */
function renderProducts(products) {
  const container = document.getElementById('products-container');
  if (!container) return;
  
  container.style.display = 'block';
  container.innerHTML = products.map(product => `
    <div class="product-card">
      <img src="${product.image}" alt="${product.name}">
      <h4>${product.name}</h4>
      <p>${product.description || ''}</p>
      <span class="price">${product.price || ''}</span>
    </div>
  `).join('');
}

/**
 * æ˜¾ç¤ºé”™è¯¯é¡µé¢
 */
function showError(message) {
  const container = document.getElementById('article-container') || document.body;
  container.innerHTML = `
    <div style="text-align: center; padding: 50px;">
      <h1>ğŸ˜•</h1>
      <h2>${message}</h2>
      <p><a href="index.html">è¿”å›é¦–é¡µ</a></p>
    </div>
  `;
}

/**
 * æ˜¾ç¤ºåŠ è½½ä¸­
 */
function showLoading() {
  const container = document.getElementById('article-container');
  if (container) {
    container.innerHTML = `
      <div style="text-align: center; padding: 50px;">
        <p>åŠ è½½ä¸­...</p>
      </div>
    `;
  }
}

/**
 * åˆå§‹åŒ–æ–‡ç« è¯¦æƒ…é¡µ
 */
async function initArticlePage() {
  showLoading();
  
  const idOrSlug = getArticleId();
  
  if (!idOrSlug) {
    showError('æ–‡ç« IDç¼ºå¤±');
    return;
  }
  
  // ä»ç´¢å¼•ä¸­æŸ¥æ‰¾
  const indexData = findInIndex(idOrSlug);
  
  if (!indexData) {
    showError('æ–‡ç« ä¸å­˜åœ¨');
    return;
  }
  
  // åŠ è½½å®Œæ•´å†…å®¹
  const article = await loadArticleContent(indexData.id);
  
  if (!article) {
    showError('æ–‡ç« åŠ è½½å¤±è´¥');
    return;
  }
  
  // æ¸²æŸ“
  renderArticleContent(article);
}

// æ£€æµ‹æ˜¯å¦æ˜¯è¯¦æƒ…é¡µï¼Œè‡ªåŠ¨åˆå§‹åŒ–
if (window.location.pathname.includes('article.html') || 
    window.location.pathname.includes('post.html')) {
  document.addEventListener('DOMContentLoaded', initArticlePage);
}
```

---

## äº”ã€éªŒè¯æ¸…å•

æ¯ä¸ªç½‘ç«™è¿ç§»å®Œæˆåï¼Œè¯·é€é¡¹éªŒè¯ï¼š

| æ£€æŸ¥é¡¹ | çŠ¶æ€ |
|--------|------|
| é¦–é¡µæ–‡ç« åˆ—è¡¨æ˜¾ç¤ºæ­£å¸¸ | â˜ |
| ç‚¹å‡»æ–‡ç« èƒ½è·³è½¬åˆ°è¯¦æƒ…é¡µ | â˜ |
| è¯¦æƒ…é¡µæ ‡é¢˜æ­£ç¡®æ˜¾ç¤º | â˜ |
| è¯¦æƒ…é¡µå†…å®¹å®Œæ•´æ˜¾ç¤º | â˜ |
| è¯¦æƒ…é¡µå›¾ç‰‡æ­£å¸¸åŠ è½½ | â˜ |
| äº§å“æ¨¡å—æ­£å¸¸æ˜¾ç¤ºï¼ˆå¦‚æœ‰ï¼‰ | â˜ |
| åˆ†ç±»ç­›é€‰åŠŸèƒ½æ­£å¸¸ | â˜ |
| æœç´¢åŠŸèƒ½æ­£å¸¸ï¼ˆå¦‚æœ‰ï¼‰ | â˜ |
| åˆ†é¡µåŠŸèƒ½æ­£å¸¸ï¼ˆå¦‚æœ‰ï¼‰ | â˜ |
| æµè§ˆå™¨æ§åˆ¶å°æ— é”™è¯¯ | â˜ |
| ç§»åŠ¨ç«¯æ˜¾ç¤ºæ­£å¸¸ | â˜ |

---

## å…­ã€å›æ»šæ–¹æ¡ˆ

å¦‚æœè¿ç§»å‡ºç°é—®é¢˜ï¼Œå¯ä»¥å¿«é€Ÿå›æ»šï¼š

```bash
# 1. æ¢å¤åŸå§‹data.js
cp js/data.js.backup js/data.js

# 2. æ¢å¤HTMLä¸­çš„å¼•ç”¨ï¼ˆæ‰‹åŠ¨æ”¹å› js/data.jsï¼‰

# 3. åˆ é™¤è¿ç§»ç”Ÿæˆçš„æ–‡ä»¶
rm -rf js/articles/
rm js/articles-index.js

# 4. æ’¤é”€JSä¿®æ”¹ï¼ˆå¦‚å·²ä¿®æ”¹main.jsï¼‰

# 5. æ¨é€å›æ»š
git add .
git commit -m "revert: å›æ»šæ–‡ç« è¿ç§»"
git push
```

---

## ä¸ƒã€å¸¸è§é—®é¢˜

### Q1: è¿è¡Œè„šæœ¬æŠ¥é”™"æ‰¾ä¸åˆ°æ–‡ç« æ•°ç»„"

**åŸå› **: data.jsæ ¼å¼ä¸è„šæœ¬é¢„æœŸä¸ç¬¦  
**è§£å†³**: å°†data.jså‰50è¡Œå‘ç»™wj07ï¼Œè°ƒæ•´è„šæœ¬

### Q2: è¯¦æƒ…é¡µæ˜¾ç¤ºç©ºç™½

**åŸå› **: JSåŠ è½½é€»è¾‘æœªæ·»åŠ   
**è§£å†³**: ç¡®è®¤å·²æŒ‰ç¬¬å››ç« 4.3æ·»åŠ ä»£ç åˆ°main.js

### Q3: æ–‡ç« é“¾æ¥è·³è½¬404

**åŸå› **: URLå‚æ•°æ ¼å¼é—®é¢˜  
**è§£å†³**: ç¡®ä¿æ–‡ç« é“¾æ¥æ ¼å¼ä¸º `article.html?id=1`

### Q4: é¦–é¡µæ–‡ç« åˆ—è¡¨ä¸æ˜¾ç¤º

**åŸå› **: å˜é‡åæœªæ›´æ–°  
**è§£å†³**: å°† `articles` æ”¹ä¸º `articlesIndex`

### Q5: äº§å“æ¨¡å—ä¸æ˜¾ç¤º

**åŸå› **: products-containerå…ƒç´ ä¸å­˜åœ¨  
**è§£å†³**: åœ¨article.htmlä¸­æ·»åŠ  `<div id="products-container"></div>`

---

## å…«ã€è¿ç§»çŠ¶æ€è¿½è¸ª

| ç½‘ç«™ | è´Ÿè´£äºº | çŠ¶æ€ | å®Œæˆæ—¥æœŸ | å¤‡æ³¨ |
|------|--------|------|----------|------|
| EverydayHaven | wj01 | ğŸŸ¡ å¾…è¿ç§» | | |
| Quiblo | wj02 | ğŸŸ¡ å¾…è¿ç§» | | éœ€å…ˆç§»åŠ¨data.js |
| Kivanta | wj03 | ğŸŸ¡ å¾…è¿ç§» | | |
| Novanest | wj04 | ğŸŸ¡ å¾…è¿ç§» | | |
| Zontri | wj05 | ğŸŸ¡ å¾…è¿ç§» | | æœ‰äº§å“æ¨¡å— |
| AllurahHub | wj06 | ğŸŸ¡ å¾…è¿ç§» | | |
| VitaHaven | wj07 | ğŸŸ¡ å¾…è¿ç§» | | |
| BloomRoots | wj09 | ğŸŸ¡ å¾…è¿ç§» | | |
| VitaSphere | wj10 | ğŸŸ¡ å¾…è¿ç§» | | |

**çŠ¶æ€è¯´æ˜**:
- ğŸŸ¡ å¾…è¿ç§»
- ğŸ”µ è¿ç§»ä¸­
- ğŸŸ¢ å·²å®Œæˆ
- ğŸ”´ è¿ç§»å¤±è´¥

---

## ä¹ã€è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»ï¼š**wj07**

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-02-13  
**æœ€åæ›´æ–°**: 2026-02-13

